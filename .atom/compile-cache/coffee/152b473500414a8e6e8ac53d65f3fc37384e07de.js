(function() {
  var Beautifiers, EventEmitter, Languages, Promise, _, _plus, allowUnsafeEval, editorconfig, extend, fs, logger, path, pkg, strip, trackingId, ua, version, yaml,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend1 = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  _ = require('lodash');

  _plus = require('underscore-plus');

  Promise = require('bluebird');

  Languages = require('../languages/');

  path = require('path');

  logger = require('../logger')(__filename);

  EventEmitter = require('events').EventEmitter;

  extend = null;

  ua = null;

  fs = null;

  strip = null;

  yaml = null;

  editorconfig = null;

  allowUnsafeEval = require('loophole').allowUnsafeEval;

  allowUnsafeEval(function() {
    return ua = require("universal-analytics");
  });

  pkg = require("../../package.json");

  version = pkg.version;

  trackingId = "UA-52729731-2";


  /*
  Register all supported beautifiers
   */

  module.exports = Beautifiers = (function(superClass) {
    extend1(Beautifiers, superClass);


    /*
      List of beautifier names
    
      To register a beautifier add its name here
     */

    Beautifiers.prototype.beautifierNames = ['uncrustify', 'align-yaml', 'autopep8', 'coffee-formatter', 'coffee-fmt', 'cljfmt', 'clang-format', 'crystal', 'dfmt', 'elm-format', 'hh_format', 'htmlbeautifier', 'csscomb', 'gherkin', 'gofmt', 'latex-beautify', 'fortran-beautifier', 'js-beautify', 'jscs', 'eslint', 'lua-beautifier', 'nginx-beautify', 'ocp-indent', 'perltidy', 'php-cs-fixer', 'phpcbf', 'prettydiff', 'pybeautifier', 'pug-beautify', 'puppet-fix', 'remark', 'rubocop', 'ruby-beautify', 'rustfmt', 'sass-convert', 'sqlformat', 'stylish-haskell', 'tidy-markdown', 'typescript-formatter', 'vue-beautifier', 'yapf', 'erl_tidy', 'marko-beautifier', 'formatR', 'beautysh'];


    /*
      List of loaded beautifiers
    
      Autogenerated in `constructor` from `beautifierNames`
     */

    Beautifiers.prototype.beautifiers = null;


    /*
      All beautifier options
    
      Autogenerated in `constructor`
     */

    Beautifiers.prototype.options = null;


    /*
      Languages
     */

    Beautifiers.prototype.languages = new Languages();


    /*
      Constructor
     */

    function Beautifiers() {
      this.getOptions = bind(this.getOptions, this);
      this.beautifiers = _.map(this.beautifierNames, function(name) {
        var Beautifier;
        Beautifier = require("./" + name);
        return new Beautifier();
      });
      this.options = this.loadOptions();
    }

    Beautifiers.prototype.loadOptions = function() {
      var error, options;
      try {
        options = require('../options.json');
        options = _.mapValues(options, function(lang) {
          var defaultIndentChar, defaultIndentSize, defaultIndentWithTabs, ref, ref1, scope, softTabs, tabLength;
          scope = lang.scope;
          tabLength = (ref = typeof atom !== "undefined" && atom !== null ? atom.config.get('editor.tabLength', {
            scope: scope
          }) : void 0) != null ? ref : 4;
          softTabs = (ref1 = typeof atom !== "undefined" && atom !== null ? atom.config.get('editor.softTabs', {
            scope: scope
          }) : void 0) != null ? ref1 : true;
          defaultIndentSize = (softTabs ? tabLength : 1);
          defaultIndentChar = (softTabs ? " " : "\t");
          defaultIndentWithTabs = !softTabs;
          if (_.has(lang, "properties.indent_size")) {
            _.set(lang, "properties.indent_size.default", defaultIndentSize);
          }
          if (_.has(lang, "properties.indent_char")) {
            _.set(lang, "properties.indent_char.default", defaultIndentChar);
          }
          if (_.has(lang, "properties.indent_with_tabs")) {
            _.set(lang, "properties.indent_with_tabs.default", defaultIndentWithTabs);
          }
          if (_.has(lang, "properties.wrap_attributes_indent_size")) {
            _.set(lang, "properties.wrap_attributes_indent_size.default", defaultIndentSize);
          }
          return lang;
        });
      } catch (error1) {
        error = error1;
        console.error("Error loading options", error);
        options = {};
      }
      return options;
    };


    /*
      From https://github.com/atom/notifications/blob/01779ade79e7196f1603b8c1fa31716aa4a33911/lib/notification-issue.coffee#L130
     */

    Beautifiers.prototype.encodeURI = function(str) {
      str = encodeURI(str);
      return str.replace(/#/g, '%23').replace(/;/g, '%3B');
    };

    Beautifiers.prototype.getBeautifiers = function(language) {
      return _.filter(this.beautifiers, function(beautifier) {
        return _.includes(beautifier.languages, language);
      });
    };

    Beautifiers.prototype.getBeautifierForLanguage = function(language) {
      var beautifier, beautifiers, preferredBeautifierName;
      beautifiers = this.getBeautifiers(language.name);
      logger.verbose('beautifiers', _.map(beautifiers, 'name'));
      preferredBeautifierName = atom.config.get("atom-beautify." + language.namespace + ".default_beautifier");
      beautifier = _.find(beautifiers, function(beautifier) {
        return beautifier.name === preferredBeautifierName;
      }) || beautifiers[0];
      return beautifier;
    };

    Beautifiers.prototype.getExtension = function(filePath) {
      if (filePath) {
        return path.extname(filePath).substr(1);
      }
    };

    Beautifiers.prototype.getLanguages = function(grammar, filePath) {
      var fileExtension, languages;
      fileExtension = this.getExtension(filePath);
      if (fileExtension) {
        languages = this.languages.getLanguages({
          grammar: grammar,
          extension: fileExtension
        });
      } else {
        languages = this.languages.getLanguages({
          grammar: grammar
        });
      }
      logger.verbose(languages, grammar, fileExtension);
      return languages;
    };

    Beautifiers.prototype.getLanguage = function(grammar, filePath) {
      var language, languages;
      languages = this.getLanguages(grammar, filePath);
      if (languages.length > 0) {
        language = languages[0];
      }
      return language;
    };

    Beautifiers.prototype.getOptionsForLanguage = function(allOptions, language) {
      var options, selections;
      selections = (language.fallback || []).concat([language.namespace]);
      return options = this.getOptions(selections, allOptions) || {};
    };

    Beautifiers.prototype.transformOptions = function(beautifier, languageName, options) {
      var beautifierOptions, field, fields, fn, i, op, transformedOptions, vals;
      beautifierOptions = beautifier.options[languageName];
      if (typeof beautifierOptions === "boolean") {
        return options;
      } else if (typeof beautifierOptions === "object") {
        transformedOptions = {};
        for (field in beautifierOptions) {
          op = beautifierOptions[field];
          if (typeof op === "string") {
            transformedOptions[field] = options[op];
          } else if (typeof op === "function") {
            transformedOptions[field] = op(options[field]);
          } else if (typeof op === "boolean") {
            if (op === true) {
              transformedOptions[field] = options[field];
            }
          } else if (_.isArray(op)) {
            fields = 2 <= op.length ? slice.call(op, 0, i = op.length - 1) : (i = 0, []), fn = op[i++];
            vals = _.map(fields, function(f) {
              return options[f];
            });
            transformedOptions[field] = fn.apply(null, vals);
          }
        }
        return transformedOptions;
      } else {
        logger.warn("Unsupported Language options: ", beautifierOptions);
        return options;
      }
    };

    Beautifiers.prototype.trackEvent = function(payload) {
      return this.track("event", payload);
    };

    Beautifiers.prototype.trackTiming = function(payload) {
      return this.track("timing", payload);
    };

    Beautifiers.prototype.track = function(type, payload) {
      var error, userId, uuid;
      try {
        if (atom.config.get("core.telemetryConsent") === "limited") {
          logger.info("Analytics is enabled.");
          if (!atom.config.get("atom-beautify.general._analyticsUserId")) {
            uuid = require("node-uuid");
            atom.config.set("atom-beautify.general._analyticsUserId", uuid.v4());
          }
          userId = atom.config.get("atom-beautify.general._analyticsUserId");
          if (this.analytics == null) {
            this.analytics = new ua(trackingId, userId, {
              headers: {
                "User-Agent": navigator.userAgent
              }
            });
          }
          return this.analytics[type](payload).send();
        } else {
          return logger.info("Analytics is disabled.");
        }
      } catch (error1) {
        error = error1;
        return logger.error(error);
      }
    };

    Beautifiers.prototype.beautify = function(text, allOptions, grammar, filePath, arg) {
      var onSave;
      onSave = (arg != null ? arg : {}).onSave;
      return Promise.all(allOptions).then((function(_this) {
        return function(allOptions) {
          return new Promise(function(resolve, reject) {
            var beautifier, beautifyOnSave, context, detail, fileExtension, langDisabled, language, options, repoBugsUrl, startTime, title, unsupportedGrammar;
            logger.info('beautify', text, allOptions, grammar, filePath, onSave);
            logger.verbose(allOptions);
            language = _this.getLanguage(grammar, filePath);
            if (!language) {
              unsupportedGrammar = true;
              logger.verbose('Unsupported language');
              if (onSave) {
                return resolve(null);
              }
            } else {
              logger.verbose("Language " + language.name + " supported");
              langDisabled = atom.config.get("atom-beautify." + language.namespace + ".disabled");
              unsupportedGrammar = false;
              if (langDisabled) {
                logger.verbose("Language " + language.name + " is disabled");
                return resolve(null);
              }
              beautifyOnSave = atom.config.get("atom-beautify." + language.namespace + ".beautify_on_save");
              if (onSave && !beautifyOnSave) {
                logger.verbose("Beautify on save is disabled for language " + language.name);
                return resolve(null);
              }
              options = _this.getOptionsForLanguage(allOptions, language);
              logger.verbose(grammar, language);
              logger.verbose("language options: " + (JSON.stringify(options, null, 4)));
              logger.verbose(language.name, filePath, options, allOptions);
              beautifier = _this.getBeautifierForLanguage(language);
              if (beautifier == null) {
                unsupportedGrammar = true;
                logger.verbose('Beautifier for language not found');
              } else {
                logger.verbose('beautifier', beautifier.name);
                options = _this.transformOptions(beautifier, language.name, options);
                _this.emit("beautify::start");
                context = {
                  filePath: filePath
                };
                startTime = new Date();
                beautifier.beautify(text, language.name, options, context).then(function(result) {
                  resolve(result);
                  _this.trackTiming({
                    utc: "Beautify",
                    utv: language != null ? language.name : void 0,
                    utt: new Date() - startTime,
                    utl: version
                  });
                  if (!result) {
                    return _this.trackEvent({
                      ec: version,
                      ea: "Beautify:Empty",
                      el: language != null ? language.name : void 0
                    });
                  }
                })["catch"](function(error) {
                  reject(error);
                  return _this.trackEvent({
                    ec: version,
                    ea: "Beautify:Error",
                    el: language != null ? language.name : void 0
                  });
                })["finally"](function() {
                  return _this.emit("beautify::end");
                });
              }
            }
            _this.trackEvent({
              ec: version,
              ea: "Beautify",
              el: language != null ? language.name : void 0
            });
            if (onSave) {
              _this.trackEvent({
                ec: version,
                ea: "Beautify:OnSave",
                el: language != null ? language.name : void 0
              });
            } else {
              _this.trackEvent({
                ec: version,
                ea: "Beautify:Manual",
                el: language != null ? language.name : void 0
              });
            }
            if (unsupportedGrammar) {
              if (atom.config.get("atom-beautify.general.muteUnsupportedLanguageErrors")) {
                return resolve(null);
              } else {
                fileExtension = _this.getExtension(filePath);
                repoBugsUrl = pkg.bugs.url;
                title = "Atom Beautify could not find a supported beautifier for this file";
                detail = "Atom Beautify could not determine a supported beautifier to handle this file with grammar \"" + grammar + "\" and extension \"" + fileExtension + "\". If you would like to request support for this file and its language, please create an issue for Atom Beautify at " + repoBugsUrl;
                if (typeof atom !== "undefined" && atom !== null) {
                  atom.notifications.addWarning(title, {
                    detail: detail,
                    dismissable: true
                  });
                }
                return resolve(null);
              }
            }
          });
        };
      })(this));
    };

    Beautifiers.prototype.findFileResults = {};

    Beautifiers.prototype.getUserHome = function() {
      return process.env.HOME || process.env.HOMEPATH || process.env.USERPROFILE;
    };

    Beautifiers.prototype.verifyExists = function(fullPath) {
      if (fs == null) {
        fs = require("fs");
      }
      if (fs.existsSync(fullPath)) {
        return fullPath;
      } else {
        return null;
      }
    };


    /*
      Searches for a file with a specified name starting with
      'dir' and going all the way up either until it finds the file
      or hits the root.
    
      @param {string} name filename to search for (e.g. .jshintrc)
      @param {string} dir directory to start search from (default:
      current working directory)
      @param {boolean} upwards should recurse upwards on failure? (default: true)
    
      @returns {string} normalized filename
     */

    Beautifiers.prototype.findFile = function(name, dir, upwards) {
      var filename, parent;
      if (upwards == null) {
        upwards = true;
      }
      if (path == null) {
        path = require("path");
      }
      dir = dir || process.cwd();
      filename = path.normalize(path.join(dir, name));
      if (this.findFileResults[filename] !== void 0) {
        return this.findFileResults[filename];
      }
      parent = path.resolve(dir, "../");
      if (this.verifyExists(filename)) {
        this.findFileResults[filename] = filename;
        return filename;
      }
      if (dir === parent) {
        this.findFileResults[filename] = null;
        return null;
      }
      if (upwards) {
        return findFile(name, parent);
      } else {
        return null;
      }
    };


    /*
      Tries to find a configuration file in either project directory
      or in the home directory. Configuration files are named
      '.jsbeautifyrc'.
    
      @param {string} config name of the configuration file
      @param {string} file path to the file to be linted
      @param {boolean} upwards should recurse upwards on failure? (default: true)
    
      @returns {string} a path to the config file
     */

    Beautifiers.prototype.findConfig = function(config, file, upwards) {
      var dir, envs, home, proj;
      if (upwards == null) {
        upwards = true;
      }
      if (path == null) {
        path = require("path");
      }
      dir = path.dirname(path.resolve(file));
      envs = this.getUserHome();
      home = path.normalize(path.join(envs, config));
      proj = this.findFile(config, dir, upwards);
      logger.verbose(dir, proj, home);
      if (proj) {
        return proj;
      }
      if (this.verifyExists(home)) {
        return home;
      }
      return null;
    };

    Beautifiers.prototype.getConfigOptionsFromSettings = function(langs) {
      var config, options;
      config = atom.config.get('atom-beautify');
      return options = _.pick(config, langs);
    };

    Beautifiers.prototype.getConfig = function(startPath, upwards) {
      var configPath, contents, detail, e, error, externalOptions, jsonError, title;
      if (upwards == null) {
        upwards = true;
      }
      startPath = (typeof startPath === "string" ? startPath : "");
      if (!startPath) {
        return {};
      }
      configPath = this.findConfig(".jsbeautifyrc", startPath, upwards);
      logger.verbose('configPath', configPath, startPath, upwards);
      externalOptions = void 0;
      if (configPath) {
        if (fs == null) {
          fs = require("fs");
        }
        try {
          contents = fs.readFileSync(configPath, {
            encoding: "utf8"
          });
        } catch (error1) {
          error = error1;
          contents = null;
        }
        if (!contents) {
          externalOptions = {};
        } else {
          try {
            if (strip == null) {
              strip = require("strip-json-comments");
            }
            externalOptions = JSON.parse(strip(contents));
          } catch (error1) {
            e = error1;
            jsonError = e.message;
            logger.debug("Failed parsing config as JSON: " + configPath);
            try {
              if (yaml == null) {
                yaml = require("yaml-front-matter");
              }
              externalOptions = yaml.safeLoad(contents);
            } catch (error1) {
              e = error1;
              title = "Atom Beautify failed to parse config as JSON or YAML";
              detail = "Parsing '.jsbeautifyrc' at " + configPath + "\nJSON: " + jsonError + "\nYAML: " + e.message;
              if (typeof atom !== "undefined" && atom !== null) {
                atom.notifications.addWarning(title, {
                  detail: detail,
                  dismissable: true
                });
              }
              logger.debug("Failed parsing config as YAML and JSON: " + configPath);
              externalOptions = {};
            }
          }
        }
      } else {
        externalOptions = {};
      }
      return externalOptions;
    };

    Beautifiers.prototype.getOptionsForPath = function(editedFilePath, editor) {
      var allOptions, configOptions, editorConfigOptions, editorOptions, homeOptions, isNested, isSelection, languageNamespaces, p, pc, pf, projectOptions, softTabs, tabLength, userHome;
      languageNamespaces = this.languages.namespaces;
      editorOptions = {};
      if (editor != null) {
        isSelection = !!editor.getSelectedText();
        softTabs = editor.softTabs;
        tabLength = editor.getTabLength();
        editorOptions = {
          indent_size: (softTabs ? tabLength : 1),
          indent_char: (softTabs ? " " : "\t"),
          indent_with_tabs: !softTabs
        };
      }
      configOptions = this.getConfigOptionsFromSettings(languageNamespaces);
      userHome = this.getUserHome();
      homeOptions = this.getConfig(path.join(userHome, "FAKEFILENAME"), false);
      if (editedFilePath != null) {
        if (editorconfig == null) {
          editorconfig = require('editorconfig');
        }
        editorConfigOptions = editorconfig.parse(editedFilePath).then(function(editorConfigOptions) {
          logger.verbose('editorConfigOptions', editorConfigOptions);
          if (editorConfigOptions.indent_style === 'space') {
            editorConfigOptions.indent_char = " ";
          } else if (editorConfigOptions.indent_style === 'tab') {
            editorConfigOptions.indent_char = "\t";
            editorConfigOptions.indent_with_tabs = true;
            if (editorConfigOptions.tab_width) {
              editorConfigOptions.indent_size = editorConfigOptions.tab_width;
            }
          }
          return {
            _default: editorConfigOptions
          };
        });
        projectOptions = [];
        p = path.dirname(editedFilePath);
        while (p !== path.resolve(p, "../")) {
          pf = path.join(p, "FAKEFILENAME");
          pc = this.getConfig(pf, false);
          isNested = this.isNestedOptions(pc);
          if (!isNested) {
            pc = {
              _default: pc
            };
          }
          projectOptions.push(pc);
          p = path.resolve(p, "../");
        }
      } else {
        editorConfigOptions = {};
        projectOptions = [];
      }
      allOptions = [
        {
          _default: editorOptions
        }, configOptions, {
          _default: homeOptions
        }, editorConfigOptions
      ];
      projectOptions.reverse();
      allOptions = allOptions.concat(projectOptions);
      return allOptions;
    };

    Beautifiers.prototype.isNestedOptions = function(currOptions) {
      var containsNested, key;
      containsNested = false;
      key = void 0;
      if (currOptions._default) {
        return true;
      }
      for (key in currOptions) {
        if (_.indexOf(this.languages.namespaces, key) >= 0 && typeof currOptions[key] === "object") {
          containsNested = true;
          break;
        }
      }
      return containsNested;
    };

    Beautifiers.prototype.getOptions = function(selections, allOptions) {
      var options, self;
      self = this;
      if (_ == null) {
        _ = require("lodash");
      }
      if (extend == null) {
        extend = require("extend");
      }
      logger.verbose('getOptions selections', selections, allOptions);
      options = _.reduce(allOptions, (function(_this) {
        return function(result, currOptions) {
          var collectedConfig, containsNested, i, len, selection;
          collectedConfig = currOptions._default || {};
          containsNested = _this.isNestedOptions(currOptions);
          logger.verbose(containsNested, currOptions);
          if (!containsNested) {
            currOptions = {
              _default: currOptions
            };
          }
          for (i = 0, len = selections.length; i < len; i++) {
            selection = selections[i];
            logger.verbose('options', selection, currOptions[selection]);
            _.merge(collectedConfig, currOptions[selection]);
            logger.verbose('options', selection, collectedConfig);
          }
          return extend(result, collectedConfig);
        };
      })(this), {});
      return options;
    };

    return Beautifiers;

  })(EventEmitter);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL1VzZXJzL3RsYW5kYXUvZG90ZmlsZXMvLmF0b20vcGFja2FnZXMvYXRvbS1iZWF1dGlmeS9zcmMvYmVhdXRpZmllcnMvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSwySkFBQTtJQUFBOzs7OztFQUFBLENBQUEsR0FBSSxPQUFBLENBQVEsUUFBUjs7RUFDSixLQUFBLEdBQVEsT0FBQSxDQUFRLGlCQUFSOztFQUNSLE9BQUEsR0FBVSxPQUFBLENBQVEsVUFBUjs7RUFDVixTQUFBLEdBQVksT0FBQSxDQUFRLGVBQVI7O0VBQ1osSUFBQSxHQUFPLE9BQUEsQ0FBUSxNQUFSOztFQUNQLE1BQUEsR0FBUyxPQUFBLENBQVEsV0FBUixDQUFBLENBQXFCLFVBQXJCOztFQUNSLGVBQWdCLE9BQUEsQ0FBUSxRQUFSOztFQUdqQixNQUFBLEdBQVM7O0VBQ1QsRUFBQSxHQUFLOztFQUNMLEVBQUEsR0FBSzs7RUFDTCxLQUFBLEdBQVE7O0VBQ1IsSUFBQSxHQUFPOztFQUNQLFlBQUEsR0FBZTs7RUFHZCxrQkFBbUIsT0FBQSxDQUFRLFVBQVI7O0VBQ3BCLGVBQUEsQ0FBZ0IsU0FBQTtXQUNkLEVBQUEsR0FBSyxPQUFBLENBQVEscUJBQVI7RUFEUyxDQUFoQjs7RUFFQSxHQUFBLEdBQU0sT0FBQSxDQUFRLG9CQUFSOztFQUNOLE9BQUEsR0FBVSxHQUFHLENBQUM7O0VBR2QsVUFBQSxHQUFhOzs7QUFFYjs7OztFQUdBLE1BQU0sQ0FBQyxPQUFQLEdBQXVCOzs7O0FBQ3JCOzs7Ozs7MEJBS0EsZUFBQSxHQUFrQixDQUNoQixZQURnQixFQUVoQixZQUZnQixFQUdoQixVQUhnQixFQUloQixrQkFKZ0IsRUFLaEIsWUFMZ0IsRUFNaEIsUUFOZ0IsRUFPaEIsY0FQZ0IsRUFRaEIsU0FSZ0IsRUFTaEIsTUFUZ0IsRUFVaEIsWUFWZ0IsRUFXaEIsV0FYZ0IsRUFZaEIsZ0JBWmdCLEVBYWhC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O2lCQU1BLE1BQUEsQ0FBTyxNQUFQLEVBQWUsZUFBZjtRQXJCNkI7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXJCLEVBc0JSLEVBdEJRO2FBK0JWO0lBeENXOzs7O0tBMW5CNEI7QUE3QjNDIiwic291cmNlc0NvbnRlbnQiOlsiXyA9IHJlcXVpcmUoJ2xvZGFzaCcpXG5fcGx1cyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUtcGx1cycpXG5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKVxuTGFuZ3VhZ2VzID0gcmVxdWlyZSgnLi4vbGFuZ3VhZ2VzLycpXG5wYXRoID0gcmVxdWlyZSgncGF0aCcpXG5sb2dnZXIgPSByZXF1aXJlKCcuLi9sb2dnZXInKShfX2ZpbGVuYW1lKVxue0V2ZW50RW1pdHRlcn0gPSByZXF1aXJlICdldmVudHMnXG5cbiMgTGF6eSBsb2FkZWQgZGVwZW5kZW5jaWVzXG5leHRlbmQgPSBudWxsXG51YSA9IG51bGxcbmZzID0gbnVsbFxuc3RyaXAgPSBudWxsXG55YW1sID0gbnVsbFxuZWRpdG9yY29uZmlnID0gbnVsbFxuXG4jIE1pc2NcbnthbGxvd1Vuc2FmZUV2YWx9ID0gcmVxdWlyZSAnbG9vcGhvbGUnXG5hbGxvd1Vuc2FmZUV2YWwgLT5cbiAgdWEgPSByZXF1aXJlKFwidW5pdmVyc2FsLWFuYWx5dGljc1wiKVxucGtnID0gcmVxdWlyZShcIi4uLy4uL3BhY2thZ2UuanNvblwiKVxudmVyc2lvbiA9IHBrZy52ZXJzaW9uXG5cbiMgQW5hbHl0aWNzXG50cmFja2luZ0lkID0gXCJVQS01MjcyOTczMS0yXCJcblxuIyMjXG5SZWdpc3RlciBhbGwgc3VwcG9ydGVkIGJlYXV0aWZpZXJzXG4jIyNcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQmVhdXRpZmllcnMgZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbiAgIyMjXG4gICAgTGlzdCBvZiBiZWF1dGlmaWVyIG5hbWVzXG5cbiAgICBUbyByZWdpc3RlciBhIGJlYXV0aWZpZXIgYWRkIGl0cyBuYW1lIGhlcmVcbiAgIyMjXG4gIGJlYXV0aWZpZXJOYW1lcyA6IFtcbiAgICAndW5jcnVzdGlmeSdcbiAgICAnYWxpZ24teWFtbCdcbiAgICAnYXV0b3BlcDgnXG4gICAgJ2NvZmZlZS1mb3JtYXR0ZXInXG4gICAgJ2NvZmZlZS1mbXQnXG4gICAgJ2NsamZtdCdcbiAgICAnY2xhbmctZm9ybWF0J1xuICAgICdjcnlzdGFsJ1xuICAgICdkZm10J1xuICAgICdlbG0tZm9ybWF0J1xuICAgICdoaF9mb3JtYXQnXG4gICAgJ2h0bWxiZWF1dGlmaWVyJ1xuICAgICdjc3Njb21iJ1xuICAgICdnaGVya2luJ1xuICAgICdnb2ZtdCdcbiAgICAnbGF0ZXgtYmVhdXRpZnknXG4gICAgJ2ZvcnRyYW4tYmVhdXRpZmllcidcbiAgICAnanMtYmVhdXRpZnknXG4gICAgJ2pzY3MnXG4gICAgJ2VzbGludCdcbiAgICAnbHVhLWJlYXV0aWZpZXInXG4gICAgJ25naW54LWJlYXV0aWZ5J1xuICAgICdvY3AtaW5kZW50J1xuICAgICdwZXJsdGlkeSdcbiAgICAncGhwLWNzLWZpeGVyJ1xuICAgICdwaHBjYmYnXG4gICAgJ3ByZXR0eWRpZmYnXG4gICAgJ3B5YmVhdXRpZmllcidcbiAgICAncHVnLWJlYXV0aWZ5J1xuICAgICdwdXBwZXQtZml4J1xuICAgICdyZW1hcmsnXG4gICAgJ3J1Ym9jb3AnXG4gICAgJ3J1YnktYmVhdXRpZnknXG4gICAgJ3J1c3RmbXQnXG4gICAgJ3Nhc3MtY29udmVydCdcbiAgICAnc3FsZm9ybWF0J1xuICAgICdzdHlsaXNoLWhhc2tlbGwnXG4gICAgJ3RpZHktbWFya2Rvd24nXG4gICAgJ3R5cGVzY3JpcHQtZm9ybWF0dGVyJ1xuICAgICd2dWUtYmVhdXRpZmllcidcbiAgICAneWFwZidcbiAgICAnZXJsX3RpZHknXG4gICAgJ21hcmtvLWJlYXV0aWZpZXInXG4gICAgJ2Zvcm1hdFInXG4gICAgJ2JlYXV0eXNoJ1xuICBdXG5cbiAgIyMjXG4gICAgTGlzdCBvZiBsb2FkZWQgYmVhdXRpZmllcnNcblxuICAgIEF1dG9nZW5lcmF0ZWQgaW4gYGNvbnN0cnVjdG9yYCBmcm9tIGBiZWF1dGlmaWVyTmFtZXNgXG4gICMjI1xuICBiZWF1dGlmaWVycyA6IG51bGxcblxuICAjIyNcbiAgICBBbGwgYmVhdXRpZmllciBvcHRpb25zXG5cbiAgICBBdXRvZ2VuZXJhdGVkIGluIGBjb25zdHJ1Y3RvcmBcbiAgIyMjXG4gIG9wdGlvbnMgOiBudWxsXG5cbiAgIyMjXG4gICAgTGFuZ3VhZ2VzXG4gICMjI1xuICBsYW5ndWFnZXMgOiBuZXcgTGFuZ3VhZ2VzKClcblxuICAjIyNcbiAgICBDb25zdHJ1Y3RvclxuICAjIyNcbiAgY29uc3RydWN0b3IgOiAtPlxuXG4gICAgIyBMb2FkIGJlYXV0aWZpZXJzXG4gICAgQGJlYXV0aWZpZXJzID0gXy5tYXAoIEBiZWF1dGlmaWVyTmFtZXMsIChuYW1lKSAtPlxuICAgICAgQmVhdXRpZmllciA9IHJlcXVpcmUoXCIuLyN7bmFtZX1cIilcbiAgICAgIG5ldyBCZWF1dGlmaWVyKClcbiAgICApXG5cbiAgICBAb3B0aW9ucyA9IEBsb2FkT3B0aW9ucygpXG5cbiAgbG9hZE9wdGlvbnMgOiAtPlxuICAgIHRyeVxuICAgICAgb3B0aW9ucyA9IHJlcXVpcmUoJy4uL29wdGlvbnMuanNvbicpXG4gICAgICBvcHRpb25zID0gXy5tYXBWYWx1ZXMob3B0aW9ucywgKGxhbmcpIC0+XG4gICAgICAgIHNjb3BlID0gbGFuZy5zY29wZVxuICAgICAgICB0YWJMZW5ndGggPSBhdG9tPy5jb25maWcuZ2V0KCdlZGl0b3IudGFiTGVuZ3RoJywgc2NvcGU6IHNjb3BlKSA/IDRcbiAgICAgICAgc29mdFRhYnMgPSBhdG9tPy5jb25maWcuZ2V0KCdlZGl0b3Iuc29mdFRhYnMnLCBzY29wZTogc2NvcGUpID8gdHJ1ZVxuICAgICAgICBkZWZhdWx0SW5kZW50U2l6ZSA9IChpZiBzb2Z0VGFicyB0aGVuIHRhYkxlbmd0aCBlbHNlIDEpXG4gICAgICAgIGRlZmF1bHRJbmRlbnRDaGFyID0gKGlmIHNvZnRUYWJzIHRoZW4gXCIgXCIgZWxzZSBcIlxcdFwiKVxuICAgICAgICBkZWZhdWx0SW5kZW50V2l0aFRhYnMgPSBub3Qgc29mdFRhYnNcbiAgICAgICAgaWYgXy5oYXMobGFuZywgXCJwcm9wZXJ0aWVzLmluZGVudF9zaXplXCIpXG4gICAgICAgICAgXy5zZXQobGFuZywgXCJwcm9wZXJ0aWVzLmluZGVudF9zaXplLmRlZmF1bHRcIiwgZGVmYXVsdEluZGVudFNpemUpXG4gICAgICAgIGlmIF8uaGFzKGxhbmcsIFwicHJvcGVydGllcy5pbmRlbnRfY2hhclwiKVxuICAgICAgICAgIF8uc2V0KGxhbmcsIFwicHJvcGVydGllcy5pbmRlbnRfY2hhci5kZWZhdWx0XCIsIGRlZmF1bHRJbmRlbnRDaGFyKVxuICAgICAgICBpZiBfLmhhcyhsYW5nLCBcInByb3BlcnRpZXMuaW5kZW50X3dpdGhfdGFic1wiKVxuICAgICAgICAgIF8uc2V0KGxhbmcsIFwicHJvcGVydGllcy5pbmRlbnRfd2l0aF90YWJzLmRlZmF1bHRcIiwgZGVmYXVsdEluZGVudFdpdGhUYWJzKVxuICAgICAgICBpZiBfLmhhcyhsYW5nLCBcInByb3BlcnRpZXMud3JhcF9hdHRyaWJ1dGVzX2luZGVudF9zaXplXCIpXG4gICAgICAgICAgXy5zZXQobGFuZywgXCJwcm9wZXJ0aWVzLndyYXBfYXR0cmlidXRlc19pbmRlbnRfc2l6ZS5kZWZhdWx0XCIsIGRlZmF1bHRJbmRlbnRTaXplKVxuICAgICAgICByZXR1cm4gbGFuZ1xuICAgICAgKVxuICAgIGNhdGNoIGVycm9yXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBvcHRpb25zXCIsIGVycm9yKVxuICAgICAgb3B0aW9ucyA9IHt9XG4gICAgcmV0dXJuIG9wdGlvbnNcblxuICAjIyNcbiAgICBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9tL25vdGlmaWNhdGlvbnMvYmxvYi8wMTc3OWFkZTc5ZTcxOTZmMTYwM2I4YzFmYTMxNzE2YWE0YTMzOTExL2xpYi9ub3RpZmljYXRpb24taXNzdWUuY29mZmVlI0wxMzBcbiAgIyMjXG4gIGVuY29kZVVSSSA6IChzdHIpIC0+XG4gICAgc3RyID0gZW5jb2RlVVJJKHN0cilcbiAgICBzdHIucmVwbGFjZSgvIy9nLCAnJTIzJykucmVwbGFjZSgvOy9nLCAnJTNCJylcblxuXG4gIGdldEJlYXV0aWZpZXJzIDogKGxhbmd1YWdlKSAtPlxuXG4gICAgIyBsb2dnZXIudmVyYm9zZShAYmVhdXRpZmllcnMpXG4gICAgXy5maWx0ZXIoIEBiZWF1dGlmaWVycywgKGJlYXV0aWZpZXIpIC0+XG5cbiAgICAgICMgbG9nZ2VyLnZlcmJvc2UoJ2JlYXV0aWZpZXInLGJlYXV0aWZpZXIsIGxhbmd1YWdlKVxuICAgICAgXy5pbmNsdWRlcyhiZWF1dGlmaWVyLmxhbmd1YWdlcywgbGFuZ3VhZ2UpXG4gICAgKVxuXG4gIGdldEJlYXV0aWZpZXJGb3JMYW5ndWFnZSA6IChsYW5ndWFnZSkgLT5cbiAgICBiZWF1dGlmaWVycyA9IEBnZXRCZWF1dGlmaWVycyhsYW5ndWFnZS5uYW1lKVxuICAgIGxvZ2dlci52ZXJib3NlKCdiZWF1dGlmaWVycycsIF8ubWFwKGJlYXV0aWZpZXJzLCAnbmFtZScpKVxuICAgICMgU2VsZWN0IGJlYXV0aWZpZXIgZnJvbSBsYW5ndWFnZSBjb25maWcgcHJlZmVyZW5jZXNcbiAgICBwcmVmZXJyZWRCZWF1dGlmaWVyTmFtZSA9IGF0b20uY29uZmlnLmdldChcImF0b20tYmVhdXRpZnkuI3tsYW5ndWFnZS5uYW1lc3BhY2V9LmRlZmF1bHRfYmVhdXRpZmllclwiKVxuICAgIGJlYXV0aWZpZXIgPSBfLmZpbmQoYmVhdXRpZmllcnMsIChiZWF1dGlmaWVyKSAtPlxuICAgICAgYmVhdXRpZmllci5uYW1lIGlzIHByZWZlcnJlZEJlYXV0aWZpZXJOYW1lXG4gICAgKSBvciBiZWF1dGlmaWVyc1swXVxuICAgIHJldHVybiBiZWF1dGlmaWVyXG5cbiAgZ2V0RXh0ZW5zaW9uIDogKGZpbGVQYXRoKSAtPlxuICAgIGlmIGZpbGVQYXRoXG4gICAgICByZXR1cm4gcGF0aC5leHRuYW1lKGZpbGVQYXRoKS5zdWJzdHIoMSlcblxuICBnZXRMYW5ndWFnZXMgOiAoZ3JhbW1hciwgZmlsZVBhdGgpIC0+XG4gICAgIyBHZXQgbGFuZ3VhZ2VcbiAgICBmaWxlRXh0ZW5zaW9uID0gQGdldEV4dGVuc2lvbihmaWxlUGF0aClcblxuICAgIGlmIGZpbGVFeHRlbnNpb25cbiAgICAgIGxhbmd1YWdlcyA9IEBsYW5ndWFnZXMuZ2V0TGFuZ3VhZ2VzKHtncmFtbWFyLCBleHRlbnNpb246IGZpbGVFeHRlbnNpb259KVxuICAgIGVsc2VcbiAgICAgIGxhbmd1YWdlcyA9IEBsYW5ndWFnZXMuZ2V0TGFuZ3VhZ2VzKHtncmFtbWFyfSlcblxuICAgIGxvZ2dlci52ZXJib3NlKGxhbmd1YWdlcywgZ3JhbW1hciwgZmlsZUV4dGVuc2lvbilcblxuICAgIHJldHVybiBsYW5ndWFnZXNcblxuICBnZXRMYW5ndWFnZSA6IChncmFtbWFyLCBmaWxlUGF0aCkgLT5cbiAgICBsYW5ndWFnZXMgPSBAZ2V0TGFuZ3VhZ2VzKGdyYW1tYXIsIGZpbGVQYXRoKVxuXG4gICAgIyBDaGVjayBpZiB1bnN1cHBvcnRlZCBsYW5ndWFnZVxuICAgIGlmIGxhbmd1YWdlcy5sZW5ndGggPiAwXG4gICAgICBsYW5ndWFnZSA9IGxhbmd1YWdlc1swXVxuXG4gICAgcmV0dXJuIGxhbmd1YWdlXG5cbiAgZ2V0T3B0aW9uc0Zvckxhbmd1YWdlIDogKGFsbE9wdGlvbnMsIGxhbmd1YWdlKSAtPlxuICAgICMgT3B0aW9ucyBmb3IgTGFuZ3VhZ2VcbiAgICBzZWxlY3Rpb25zID0gKGxhbmd1YWdlLmZhbGxiYWNrIG9yIFtdKS5jb25jYXQoW2xhbmd1YWdlLm5hbWVzcGFjZV0pXG4gICAgb3B0aW9ucyA9IEBnZXRPcHRpb25zKHNlbGVjdGlvbnMsIGFsbE9wdGlvbnMpIG9yIHt9XG5cbiAgdHJhbnNmb3JtT3B0aW9ucyA6IChiZWF1dGlmaWVyLCBsYW5ndWFnZU5hbWUsIG9wdGlvbnMpIC0+XG5cbiAgICAjIFRyYW5zZm9ybSBvcHRpb25zLCBpZiBhcHBsaWNhYmxlXG4gICAgYmVhdXRpZmllck9wdGlvbnMgPSBiZWF1dGlmaWVyLm9wdGlvbnNbbGFuZ3VhZ2VOYW1lXVxuICAgIGlmIHR5cGVvZiBiZWF1dGlmaWVyT3B0aW9ucyBpcyBcImJvb2xlYW5cIlxuXG4gICAgICAjIExhbmd1YWdlIGlzIHN1cHBvcnRlZCBieSBiZWF1dGlmaWVyXG4gICAgICAjIElmIHRydWUgdGhlbiBhbGwgb3B0aW9ucyBhcmUgZGlyZWN0bHkgc3VwcG9ydGVkXG4gICAgICAjIElmIGZhbHN5IHRoZW4gcGFzcyBhbGwgb3B0aW9ucyB0byBiZWF1dGlmaWVyLFxuICAgICAgIyBhbHRob3VnaCBubyBvcHRpb25zIGFyZSBkaXJlY3RseSBzdXBwb3J0ZWQuXG4gICAgICByZXR1cm4gb3B0aW9uc1xuICAgIGVsc2UgaWYgdHlwZW9mIGJlYXV0aWZpZXJPcHRpb25zIGlzIFwib2JqZWN0XCJcblxuICAgICAgIyBUcmFuc2Zvcm0gdGhlIG9wdGlvbnNcbiAgICAgIHRyYW5zZm9ybWVkT3B0aW9ucyA9IHt9XG5cblxuICAgICAgIyBUcmFuc2Zvcm0gZm9yIGZpZWxkc1xuICAgICAgZm9yIGZpZWxkLCBvcCBvZiBiZWF1dGlmaWVyT3B0aW9uc1xuICAgICAgICBpZiB0eXBlb2Ygb3AgaXMgXCJzdHJpbmdcIlxuXG4gICAgICAgICAgIyBSZW5hbWVcbiAgICAgICAgICB0cmFuc2Zvcm1lZE9wdGlvbnNbZmllbGRdID0gb3B0aW9uc1tvcF1cbiAgICAgICAgZWxzZSBpZiB0eXBlb2Ygb3AgaXMgXCJmdW5jdGlvblwiXG5cbiAgICAgICAgICAjIFRyYW5zZm9ybVxuICAgICAgICAgIHRyYW5zZm9ybWVkT3B0aW9uc1tmaWVsZF0gPSBvcChvcHRpb25zW2ZpZWxkXSlcbiAgICAgICAgZWxzZSBpZiB0eXBlb2Ygb3AgaXMgXCJib29sZWFuXCJcblxuICAgICAgICAgICMgRW5hYmxlL0Rpc2FibGVcbiAgICAgICAgICBpZiBvcCBpcyB0cnVlXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZE9wdGlvbnNbZmllbGRdID0gb3B0aW9uc1tmaWVsZF1cbiAgICAgICAgZWxzZSBpZiBfLmlzQXJyYXkob3ApXG5cbiAgICAgICAgICAjIENvbXBsZXggZnVuY3Rpb25cbiAgICAgICAgICBbZmllbGRzLi4uLCBmbl0gPSBvcFxuICAgICAgICAgIHZhbHMgPSBfLm1hcChmaWVsZHMsIChmKSAtPlxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnNbZl1cbiAgICAgICAgICApXG5cbiAgICAgICAgICAjIEFwcGx5IGZ1bmN0aW9uXG4gICAgICAgICAgdHJhbnNmb3JtZWRPcHRpb25zW2ZpZWxkXSA9IGZuLmFwcGx5KCBudWxsICwgdmFscylcblxuICAgICAgIyBSZXBsYWNlIG9sZCBvcHRpb25zIHdpdGggbmV3IHRyYW5zZm9ybWVkIG9wdGlvbnNcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZE9wdGlvbnNcbiAgICBlbHNlXG4gICAgICBsb2dnZXIud2FybihcIlVuc3VwcG9ydGVkIExhbmd1YWdlIG9wdGlvbnM6IFwiLCBiZWF1dGlmaWVyT3B0aW9ucylcbiAgICAgIHJldHVybiBvcHRpb25zXG5cbiAgdHJhY2tFdmVudCA6IChwYXlsb2FkKSAtPlxuICAgIEB0cmFjayhcImV2ZW50XCIsIHBheWxvYWQpXG5cbiAgdHJhY2tUaW1pbmcgOiAocGF5bG9hZCkgLT5cbiAgICBAdHJhY2soXCJ0aW1pbmdcIiwgcGF5bG9hZClcblxuICB0cmFjayA6ICh0eXBlLCBwYXlsb2FkKSAtPlxuICAgIHRyeVxuICAgICAgIyBDaGVjayBpZiBBbmFseXRpY3MgaXMgZW5hYmxlZFxuICAgICAgaWYgYXRvbS5jb25maWcuZ2V0KFwiY29yZS50ZWxlbWV0cnlDb25zZW50XCIpIGlzIFwibGltaXRlZFwiXG4gICAgICAgIGxvZ2dlci5pbmZvKFwiQW5hbHl0aWNzIGlzIGVuYWJsZWQuXCIpXG4gICAgICAgICMgU2V0dXAgQW5hbHl0aWNzXG4gICAgICAgIHVubGVzcyBhdG9tLmNvbmZpZy5nZXQoXCJhdG9tLWJlYXV0aWZ5LmdlbmVyYWwuX2FuYWx5dGljc1VzZXJJZFwiKVxuICAgICAgICAgIHV1aWQgPSByZXF1aXJlKFwibm9kZS11dWlkXCIpXG4gICAgICAgICAgYXRvbS5jb25maWcuc2V0IFwiYXRvbS1iZWF1dGlmeS5nZW5lcmFsLl9hbmFseXRpY3NVc2VySWRcIiwgdXVpZC52NCgpXG4gICAgICAgICMgU2V0dXAgQW5hbHl0aWNzIFVzZXIgSWRcbiAgICAgICAgdXNlcklkID0gYXRvbS5jb25maWcuZ2V0KFwiYXRvbS1iZWF1dGlmeS5nZW5lcmFsLl9hbmFseXRpY3NVc2VySWRcIilcbiAgICAgICAgQGFuYWx5dGljcyA/PSBuZXcgdWEodHJhY2tpbmdJZCwgdXNlcklkLCB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJVc2VyLUFnZW50XCI6IG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIEBhbmFseXRpY3NbdHlwZV0ocGF5bG9hZCkuc2VuZCgpXG4gICAgICBlbHNlXG4gICAgICAgIGxvZ2dlci5pbmZvKFwiQW5hbHl0aWNzIGlzIGRpc2FibGVkLlwiKVxuICAgIGNhdGNoIGVycm9yXG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpXG5cblxuICBiZWF1dGlmeSA6ICh0ZXh0LCBhbGxPcHRpb25zLCBncmFtbWFyLCBmaWxlUGF0aCwge29uU2F2ZX0gPSB7fSkgLT5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoYWxsT3B0aW9ucylcbiAgICAudGhlbigoYWxsT3B0aW9ucykgPT5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgICBsb2dnZXIuaW5mbygnYmVhdXRpZnknLCB0ZXh0LCBhbGxPcHRpb25zLCBncmFtbWFyLCBmaWxlUGF0aCwgb25TYXZlKVxuICAgICAgICBsb2dnZXIudmVyYm9zZShhbGxPcHRpb25zKVxuXG4gICAgICAgIGxhbmd1YWdlID0gQGdldExhbmd1YWdlKGdyYW1tYXIsIGZpbGVQYXRoKVxuXG4gICAgICAgICMgQ2hlY2sgaWYgdW5zdXBwb3J0ZWQgbGFuZ3VhZ2VcbiAgICAgICAgaWYgIWxhbmd1YWdlXG4gICAgICAgICAgdW5zdXBwb3J0ZWRHcmFtbWFyID0gdHJ1ZVxuXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ1Vuc3VwcG9ydGVkIGxhbmd1YWdlJylcblxuICAgICAgICAgICMgQ2hlY2sgaWYgb24gc2F2ZVxuICAgICAgICAgIGlmIG9uU2F2ZVxuICAgICAgICAgICAgIyBJZ25vcmUgdGhpcywgYXMgaXQgd2FzIGp1c3QgYSBnZW5lcmFsIGZpbGUgc2F2ZSwgYW5kXG4gICAgICAgICAgICAjIG5vdCBpbnRlbmRlZCB0byBiZSBiZWF1dGlmaWVkXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggbnVsbCApXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBsb2dnZXIudmVyYm9zZShcIkxhbmd1YWdlICN7bGFuZ3VhZ2UubmFtZX0gc3VwcG9ydGVkXCIpXG5cbiAgICAgICAgICAjIEdldCBsYW5ndWFnZSBjb25maWdcbiAgICAgICAgICBsYW5nRGlzYWJsZWQgPSBhdG9tLmNvbmZpZy5nZXQoXCJhdG9tLWJlYXV0aWZ5LiN7bGFuZ3VhZ2UubmFtZXNwYWNlfS5kaXNhYmxlZFwiKVxuXG4gICAgICAgICAgIyBCZWF1dGlmeSFcbiAgICAgICAgICB1bnN1cHBvcnRlZEdyYW1tYXIgPSBmYWxzZVxuXG4gICAgICAgICAgIyBDaGVjayBpZiBMYW5ndWFnZSBpcyBkaXNhYmxlZFxuICAgICAgICAgIGlmIGxhbmdEaXNhYmxlZFxuICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJMYW5ndWFnZSAje2xhbmd1YWdlLm5hbWV9IGlzIGRpc2FibGVkXCIpXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggbnVsbCApXG5cbiAgICAgICAgICAjIEdldCBtb3JlIGxhbmd1YWdlIGNvbmZpZ1xuICAgICAgICAgIGJlYXV0aWZ5T25TYXZlID0gYXRvbS5jb25maWcuZ2V0KFwiYXRvbS1iZWF1dGlmeS4je2xhbmd1YWdlLm5hbWVzcGFjZX0uYmVhdXRpZnlfb25fc2F2ZVwiKVxuXG4gICAgICAgICAgIyBWZXJpZnkgaWYgYmVhdXRpZnlpbmcgb24gc2F2ZVxuICAgICAgICAgIGlmIG9uU2F2ZSBhbmQgbm90IGJlYXV0aWZ5T25TYXZlXG4gICAgICAgICAgICBsb2dnZXIudmVyYm9zZShcIkJlYXV0aWZ5IG9uIHNhdmUgaXMgZGlzYWJsZWQgZm9yIGxhbmd1YWdlICN7bGFuZ3VhZ2UubmFtZX1cIilcbiAgICAgICAgICAgICMgU2F2aW5nLCBhbmQgYmVhdXRpZnkgb24gc2F2ZSBpcyBkaXNhYmxlZFxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIG51bGwgKVxuXG4gICAgICAgICAgIyBPcHRpb25zIGZvciBMYW5ndWFnZVxuICAgICAgICAgIG9wdGlvbnMgPSBAZ2V0T3B0aW9uc0Zvckxhbmd1YWdlKGFsbE9wdGlvbnMsIGxhbmd1YWdlKVxuXG4gICAgICAgICAgIyBHZXQgQmVhdXRpZmllclxuICAgICAgICAgIGxvZ2dlci52ZXJib3NlKGdyYW1tYXIsIGxhbmd1YWdlKVxuXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJsYW5ndWFnZSBvcHRpb25zOiAje0pTT04uc3RyaW5naWZ5KG9wdGlvbnMsIG51bGwsIDQpfVwiKVxuXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UobGFuZ3VhZ2UubmFtZSwgZmlsZVBhdGgsIG9wdGlvbnMsIGFsbE9wdGlvbnMpXG5cbiAgICAgICAgICAjIENoZWNrIGlmIHVuc3VwcG9ydGVkIGxhbmd1YWdlXG4gICAgICAgICAgYmVhdXRpZmllciA9IEBnZXRCZWF1dGlmaWVyRm9yTGFuZ3VhZ2UobGFuZ3VhZ2UpXG4gICAgICAgICAgaWYgbm90IGJlYXV0aWZpZXI/XG4gICAgICAgICAgICB1bnN1cHBvcnRlZEdyYW1tYXIgPSB0cnVlXG4gICAgICAgICAgICBsb2dnZXIudmVyYm9zZSgnQmVhdXRpZmllciBmb3IgbGFuZ3VhZ2Ugbm90IGZvdW5kJylcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBsb2dnZXIudmVyYm9zZSgnYmVhdXRpZmllcicsIGJlYXV0aWZpZXIubmFtZSlcblxuICAgICAgICAgICAgIyBBcHBseSBsYW5ndWFnZS1zcGVjaWZpYyBvcHRpb24gdHJhbnNmb3JtYXRpb25zXG4gICAgICAgICAgICBvcHRpb25zID0gQHRyYW5zZm9ybU9wdGlvbnMoYmVhdXRpZmllciwgbGFuZ3VhZ2UubmFtZSwgb3B0aW9ucylcblxuICAgICAgICAgICAgIyBCZWF1dGlmeSB0ZXh0IHdpdGggbGFuZ3VhZ2Ugb3B0aW9uc1xuICAgICAgICAgICAgQGVtaXQgXCJiZWF1dGlmeTo6c3RhcnRcIlxuXG4gICAgICAgICAgICBjb250ZXh0ID1cbiAgICAgICAgICAgICAgZmlsZVBhdGg6IGZpbGVQYXRoXG5cbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IG5ldyBEYXRlKClcbiAgICAgICAgICAgIGJlYXV0aWZpZXIuYmVhdXRpZnkodGV4dCwgbGFuZ3VhZ2UubmFtZSwgb3B0aW9ucywgY29udGV4dClcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxuICAgICAgICAgICAgICAjIFRyYWNrIFRpbWluZ1xuICAgICAgICAgICAgICBAdHJhY2tUaW1pbmcoe1xuICAgICAgICAgICAgICAgIHV0YzogXCJCZWF1dGlmeVwiICMgQ2F0ZWdvcnlcbiAgICAgICAgICAgICAgICB1dHY6IGxhbmd1YWdlPy5uYW1lICMgVmFyaWFibGVcbiAgICAgICAgICAgICAgICB1dHQ6IChuZXcgRGF0ZSgpIC0gc3RhcnRUaW1lKSAjIFZhbHVlXG4gICAgICAgICAgICAgICAgdXRsOiB2ZXJzaW9uICMgTGFiZWxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgIyBUcmFjayBFbXB0eSBiZWF1dGlmaWNhdGlvbiByZXN1bHRzXG4gICAgICAgICAgICAgIGlmIG5vdCByZXN1bHRcbiAgICAgICAgICAgICAgICBAdHJhY2tFdmVudCh7XG4gICAgICAgICAgICAgICAgICBlYzogdmVyc2lvbiwgIyBDYXRlZ29yeVxuICAgICAgICAgICAgICAgICAgZWE6IFwiQmVhdXRpZnk6RW1wdHlcIiAjIEFjdGlvblxuICAgICAgICAgICAgICAgICAgZWw6IGxhbmd1YWdlPy5uYW1lICMgTGFiZWxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT5cbiAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAjIFRyYWNrIEVycm9yc1xuICAgICAgICAgICAgICBAdHJhY2tFdmVudCh7XG4gICAgICAgICAgICAgICAgZWM6IHZlcnNpb24sICMgQ2F0ZWdvcnlcbiAgICAgICAgICAgICAgICBlYTogXCJCZWF1dGlmeTpFcnJvclwiICMgQWN0aW9uXG4gICAgICAgICAgICAgICAgZWw6IGxhbmd1YWdlPy5uYW1lICMgTGFiZWxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5maW5hbGx5KD0+XG4gICAgICAgICAgICAgIEBlbWl0IFwiYmVhdXRpZnk6OmVuZFwiXG4gICAgICAgICAgICApXG5cbiAgICAgICAgIyBDaGVjayBpZiBBbmFseXRpY3MgaXMgZW5hYmxlZFxuICAgICAgICBAdHJhY2tFdmVudCh7XG4gICAgICAgICAgZWM6IHZlcnNpb24sICMgQ2F0ZWdvcnlcbiAgICAgICAgICBlYTogXCJCZWF1dGlmeVwiICMgQWN0aW9uXG4gICAgICAgICAgZWw6IGxhbmd1YWdlPy5uYW1lICMgTGFiZWxcbiAgICAgICAgfSlcbiAgICAgICAgaWYgb25TYXZlXG4gICAgICAgICAgQHRyYWNrRXZlbnQoe1xuICAgICAgICAgICAgZWM6IHZlcnNpb24sICMgQ2F0ZWdvcnlcbiAgICAgICAgICAgIGVhOiBcIkJlYXV0aWZ5Ok9uU2F2ZVwiICMgQWN0aW9uXG4gICAgICAgICAgICBlbDogbGFuZ3VhZ2U/Lm5hbWUgIyBMYWJlbFxuICAgICAgICAgIH0pXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBAdHJhY2tFdmVudCh7XG4gICAgICAgICAgICBlYzogdmVyc2lvbiwgIyBDYXRlZ29yeVxuICAgICAgICAgICAgZWE6IFwiQmVhdXRpZnk6TWFudWFsXCIgIyBBY3Rpb25cbiAgICAgICAgICAgIGVsOiBsYW5ndWFnZT8ubmFtZSAjIExhYmVsXG4gICAgICAgICAgfSlcblxuXG4gICAgICAgIGlmIHVuc3VwcG9ydGVkR3JhbW1hclxuICAgICAgICAgIGlmIGF0b20uY29uZmlnLmdldChcImF0b20tYmVhdXRpZnkuZ2VuZXJhbC5tdXRlVW5zdXBwb3J0ZWRMYW5ndWFnZUVycm9yc1wiKVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIG51bGwgKVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZpbGVFeHRlbnNpb24gPSBAZ2V0RXh0ZW5zaW9uKGZpbGVQYXRoKVxuICAgICAgICAgICAgcmVwb0J1Z3NVcmwgPSBwa2cuYnVncy51cmxcbiAgICAgICAgICAgIHRpdGxlID0gXCJBdG9tIEJlYXV0aWZ5IGNvdWxkIG5vdCBmaW5kIGEgc3VwcG9ydGVkIGJlYXV0aWZpZXIgZm9yIHRoaXMgZmlsZVwiXG4gICAgICAgICAgICBkZXRhaWwgPSBcIlwiXCJcbiAgICAgICAgICAgICAgICAgICAgIEF0b20gQmVhdXRpZnkgY291bGQgbm90IGRldGVybWluZSBhIHN1cHBvcnRlZCBiZWF1dGlmaWVyIHRvIGhhbmRsZSB0aGlzIGZpbGUgd2l0aCBncmFtbWFyIFxcXCIje2dyYW1tYXJ9XFxcIiBhbmQgZXh0ZW5zaW9uIFxcXCIje2ZpbGVFeHRlbnNpb259XFxcIi4gXFxcbiAgICAgICAgICAgICAgICAgICAgIElmIHlvdSB3b3VsZCBsaWtlIHRvIHJlcXVlc3Qgc3VwcG9ydCBmb3IgdGhpcyBmaWxlIGFuZCBpdHMgbGFuZ3VhZ2UsIHBsZWFzZSBjcmVhdGUgYW4gaXNzdWUgZm9yIEF0b20gQmVhdXRpZnkgYXQgI3tyZXBvQnVnc1VybH1cbiAgICAgICAgICAgICAgICAgICAgIFwiXCJcIlxuXG4gICAgICAgICAgICBhdG9tPy5ub3RpZmljYXRpb25zLmFkZFdhcm5pbmcodGl0bGUsIHtcbiAgICAgICAgICAgICAgZGV0YWlsXG4gICAgICAgICAgICAgIGRpc21pc3NhYmxlIDogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCBudWxsIClcbiAgICAgICAgICAgIClcblxuICAgICAgKVxuXG4gIGZpbmRGaWxlUmVzdWx0cyA6IHt9XG5cblxuICAjIENMSVxuICBnZXRVc2VySG9tZSA6IC0+XG4gICAgcHJvY2Vzcy5lbnYuSE9NRSBvciBwcm9jZXNzLmVudi5IT01FUEFUSCBvciBwcm9jZXNzLmVudi5VU0VSUFJPRklMRVxuICB2ZXJpZnlFeGlzdHMgOiAoZnVsbFBhdGgpIC0+XG4gICAgZnMgPz0gcmVxdWlyZShcImZzXCIpXG4gICAgKCBpZiBmcy5leGlzdHNTeW5jKGZ1bGxQYXRoKSB0aGVuIGZ1bGxQYXRoIGVsc2UgbnVsbCApXG5cblxuXG4gICMgU3RvcmFnZSBmb3IgbWVtb2l6ZWQgcmVzdWx0cyBmcm9tIGZpbmQgZmlsZVxuICAjIFNob3VsZCBwcmV2ZW50IGxvdHMgb2YgZGlyZWN0b3J5IHRyYXZlcnNhbCAmXG4gICMgbG9va3VwcyB3aGVuIGxpbml0aW5nIGFuIGVudGlyZSBwcm9qZWN0XG4gICMjI1xuICAgIFNlYXJjaGVzIGZvciBhIGZpbGUgd2l0aCBhIHNwZWNpZmllZCBuYW1lIHN0YXJ0aW5nIHdpdGhcbiAgICAnZGlyJyBhbmQgZ29pbmcgYWxsIHRoZSB3YXkgdXAgZWl0aGVyIHVudGlsIGl0IGZpbmRzIHRoZSBmaWxlXG4gICAgb3IgaGl0cyB0aGUgcm9vdC5cblxuICAgIEBwYXJhbSB7c3RyaW5nfSBuYW1lIGZpbGVuYW1lIHRvIHNlYXJjaCBmb3IgKGUuZy4gLmpzaGludHJjKVxuICAgIEBwYXJhbSB7c3RyaW5nfSBkaXIgZGlyZWN0b3J5IHRvIHN0YXJ0IHNlYXJjaCBmcm9tIChkZWZhdWx0OlxuICAgIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkpXG4gICAgQHBhcmFtIHtib29sZWFufSB1cHdhcmRzIHNob3VsZCByZWN1cnNlIHVwd2FyZHMgb24gZmFpbHVyZT8gKGRlZmF1bHQ6IHRydWUpXG5cbiAgICBAcmV0dXJucyB7c3RyaW5nfSBub3JtYWxpemVkIGZpbGVuYW1lXG4gICMjI1xuICBmaW5kRmlsZSA6IChuYW1lLCBkaXIsIHVwd2FyZHMgPSB0cnVlKSAtPlxuICAgIHBhdGggPz0gcmVxdWlyZShcInBhdGhcIilcbiAgICBkaXIgPSBkaXIgb3IgcHJvY2Vzcy5jd2QoKVxuICAgIGZpbGVuYW1lID0gcGF0aC5ub3JtYWxpemUocGF0aC5qb2luKGRpciwgbmFtZSkpXG4gICAgcmV0dXJuIEBmaW5kRmlsZVJlc3VsdHNbZmlsZW5hbWVdIGlmIEBmaW5kRmlsZVJlc3VsdHNbZmlsZW5hbWVdIGlzbnQgdW5kZWZpbmVkXG4gICAgcGFyZW50ID0gcGF0aC5yZXNvbHZlKGRpciwgXCIuLi9cIilcbiAgICBpZiBAdmVyaWZ5RXhpc3RzKGZpbGVuYW1lKVxuICAgICAgQGZpbmRGaWxlUmVzdWx0c1tmaWxlbmFtZV0gPSBmaWxlbmFtZVxuICAgICAgcmV0dXJuIGZpbGVuYW1lXG4gICAgaWYgZGlyIGlzIHBhcmVudFxuICAgICAgQGZpbmRGaWxlUmVzdWx0c1tmaWxlbmFtZV0gPSBudWxsXG4gICAgICByZXR1cm4gbnVsbFxuICAgIGlmIHVwd2FyZHNcbiAgICAgIGZpbmRGaWxlIG5hbWUsIHBhcmVudFxuICAgIGVsc2VcbiAgICAgIHJldHVybiBudWxsXG5cblxuICAjIyNcbiAgICBUcmllcyB0byBmaW5kIGEgY29uZmlndXJhdGlvbiBmaWxlIGluIGVpdGhlciBwcm9qZWN0IGRpcmVjdG9yeVxuICAgIG9yIGluIHRoZSBob21lIGRpcmVjdG9yeS4gQ29uZmlndXJhdGlvbiBmaWxlcyBhcmUgbmFtZWRcbiAgICAnLmpzYmVhdXRpZnlyYycuXG5cbiAgICBAcGFyYW0ge3N0cmluZ30gY29uZmlnIG5hbWUgb2YgdGhlIGNvbmZpZ3VyYXRpb24gZmlsZVxuICAgIEBwYXJhbSB7c3RyaW5nfSBmaWxlIHBhdGggdG8gdGhlIGZpbGUgdG8gYmUgbGludGVkXG4gICAgQHBhcmFtIHtib29sZWFufSB1cHdhcmRzIHNob3VsZCByZWN1cnNlIHVwd2FyZHMgb24gZmFpbHVyZT8gKGRlZmF1bHQ6IHRydWUpXG5cbiAgICBAcmV0dXJucyB7c3RyaW5nfSBhIHBhdGggdG8gdGhlIGNvbmZpZyBmaWxlXG4gICMjI1xuICBmaW5kQ29uZmlnIDogKGNvbmZpZywgZmlsZSwgdXB3YXJkcyA9IHRydWUpIC0+XG4gICAgcGF0aCA/PSByZXF1aXJlKFwicGF0aFwiKVxuICAgIGRpciA9IHBhdGguZGlybmFtZShwYXRoLnJlc29sdmUoZmlsZSkpXG4gICAgZW52cyA9IEBnZXRVc2VySG9tZSgpXG4gICAgaG9tZSA9IHBhdGgubm9ybWFsaXplKHBhdGguam9pbihlbnZzLCBjb25maWcpKVxuICAgIHByb2ogPSBAZmluZEZpbGUoY29uZmlnLCBkaXIsIHVwd2FyZHMpXG4gICAgbG9nZ2VyLnZlcmJvc2UoZGlyLCBwcm9qLCBob21lKVxuICAgIHJldHVybiBwcm9qIGlmIHByb2pcbiAgICByZXR1cm4gaG9tZSBpZiBAdmVyaWZ5RXhpc3RzKGhvbWUpXG4gICAgbnVsbFxuICBnZXRDb25maWdPcHRpb25zRnJvbVNldHRpbmdzIDogKGxhbmdzKSAtPlxuICAgIGNvbmZpZyA9IGF0b20uY29uZmlnLmdldCgnYXRvbS1iZWF1dGlmeScpXG4gICAgb3B0aW9ucyA9IF8ucGljayhjb25maWcsIGxhbmdzKVxuXG4gICMgTG9vayBmb3IgLmpzYmVhdXRpZmllcnJjIGluIGZpbGUgYW5kIGhvbWUgcGF0aCwgY2hlY2sgZW52IHZhcmlhYmxlc1xuICBnZXRDb25maWcgOiAoc3RhcnRQYXRoLCB1cHdhcmRzID0gdHJ1ZSkgLT5cbiAgICAjIGNvbnNvbGUubG9nKCdnZXRDb25maWcnLCBzdGFydFBhdGgsIHVwd2FyZHMpXG4gICAgIyBWZXJpZnkgdGhhdCBzdGFydFBhdGggaXMgYSBzdHJpbmdcbiAgICBzdGFydFBhdGggPSAoIGlmICggdHlwZW9mIHN0YXJ0UGF0aCBpcyBcInN0cmluZ1wiKSB0aGVuIHN0YXJ0UGF0aCBlbHNlIFwiXCIpXG4gICAgcmV0dXJuIHt9IHVubGVzcyBzdGFydFBhdGhcblxuXG4gICAgIyBHZXQgdGhlIHBhdGggdG8gdGhlIGNvbmZpZyBmaWxlXG4gICAgY29uZmlnUGF0aCA9IEBmaW5kQ29uZmlnKFwiLmpzYmVhdXRpZnlyY1wiLCBzdGFydFBhdGgsIHVwd2FyZHMpXG4gICAgbG9nZ2VyLnZlcmJvc2UoJ2NvbmZpZ1BhdGgnLCBjb25maWdQYXRoLCBzdGFydFBhdGgsIHVwd2FyZHMpXG4gICAgZXh0ZXJuYWxPcHRpb25zID0gdW5kZWZpbmVkXG4gICAgaWYgY29uZmlnUGF0aFxuICAgICAgZnMgPz0gcmVxdWlyZShcImZzXCIpXG4gICAgICB0cnlcbiAgICAgICAgY29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoY29uZmlnUGF0aCxcbiAgICAgICAgICBlbmNvZGluZyA6IFwidXRmOFwiXG4gICAgICAgIClcbiAgICAgIGNhdGNoIGVycm9yXG4gICAgICAgIGNvbnRlbnRzID0gbnVsbCAjZmlsZSBpc250IGF2YWlsYWJsZSBhbnltb3JlXG4gICAgICB1bmxlc3MgY29udGVudHNcbiAgICAgICAgZXh0ZXJuYWxPcHRpb25zID0ge31cbiAgICAgIGVsc2VcbiAgICAgICAgdHJ5XG4gICAgICAgICAgc3RyaXAgPz0gcmVxdWlyZShcInN0cmlwLWpzb24tY29tbWVudHNcIilcbiAgICAgICAgICBleHRlcm5hbE9wdGlvbnMgPSBKU09OLnBhcnNlKHN0cmlwKGNvbnRlbnRzKSlcbiAgICAgICAgY2F0Y2ggZVxuICAgICAgICAgIGpzb25FcnJvciA9IGUubWVzc2FnZVxuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyBcIkZhaWxlZCBwYXJzaW5nIGNvbmZpZyBhcyBKU09OOiBcIiArIGNvbmZpZ1BhdGhcbiAgICAgICAgICAjIEF0dGVtcHQgYXMgWUFNTFxuICAgICAgICAgIHRyeVxuICAgICAgICAgICAgeWFtbCA/PSByZXF1aXJlKFwieWFtbC1mcm9udC1tYXR0ZXJcIilcbiAgICAgICAgICAgIGV4dGVybmFsT3B0aW9ucyA9IHlhbWwuc2FmZUxvYWQoY29udGVudHMpXG4gICAgICAgICAgY2F0Y2ggZVxuICAgICAgICAgICAgdGl0bGUgPSBcIkF0b20gQmVhdXRpZnkgZmFpbGVkIHRvIHBhcnNlIGNvbmZpZyBhcyBKU09OIG9yIFlBTUxcIlxuICAgICAgICAgICAgZGV0YWlsID0gXCJcIlwiXG4gICAgICAgICAgICAgICAgICAgICBQYXJzaW5nICcuanNiZWF1dGlmeXJjJyBhdCAje2NvbmZpZ1BhdGh9XG4gICAgICAgICAgICAgICAgICAgICBKU09OOiAje2pzb25FcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgIFlBTUw6ICN7ZS5tZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAgXCJcIlwiXG4gICAgICAgICAgICBhdG9tPy5ub3RpZmljYXRpb25zLmFkZFdhcm5pbmcodGl0bGUsIHtcbiAgICAgICAgICAgICAgZGV0YWlsXG4gICAgICAgICAgICAgIGRpc21pc3NhYmxlIDogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyBcIkZhaWxlZCBwYXJzaW5nIGNvbmZpZyBhcyBZQU1MIGFuZCBKU09OOiBcIiArIGNvbmZpZ1BhdGhcbiAgICAgICAgICAgIGV4dGVybmFsT3B0aW9ucyA9IHt9XG4gICAgZWxzZVxuICAgICAgZXh0ZXJuYWxPcHRpb25zID0ge31cbiAgICByZXR1cm4gZXh0ZXJuYWxPcHRpb25zXG5cbiAgZ2V0T3B0aW9uc0ZvclBhdGggOiAoZWRpdGVkRmlsZVBhdGgsIGVkaXRvcikgLT5cbiAgICBsYW5ndWFnZU5hbWVzcGFjZXMgPSBAbGFuZ3VhZ2VzLm5hbWVzcGFjZXNcblxuXG4gICAgIyBFZGl0b3IgT3B0aW9uc1xuICAgIGVkaXRvck9wdGlvbnMgPSB7fVxuICAgIGlmIGVkaXRvcj9cblxuICAgICAgIyBHZXQgY3VycmVudCBBdG9tIGVkaXRvciBjb25maWd1cmF0aW9uXG4gICAgICBpc1NlbGVjdGlvbiA9ICEhZWRpdG9yLmdldFNlbGVjdGVkVGV4dCgpXG4gICAgICBzb2Z0VGFicyA9IGVkaXRvci5zb2Z0VGFic1xuICAgICAgdGFiTGVuZ3RoID0gZWRpdG9yLmdldFRhYkxlbmd0aCgpXG4gICAgICBlZGl0b3JPcHRpb25zID1cbiAgICAgICAgaW5kZW50X3NpemUgOiAoIGlmIHNvZnRUYWJzIHRoZW4gdGFiTGVuZ3RoIGVsc2UgMSlcbiAgICAgICAgaW5kZW50X2NoYXIgOiAoIGlmIHNvZnRUYWJzIHRoZW4gXCIgXCIgZWxzZSBcIlxcdFwiKVxuICAgICAgICBpbmRlbnRfd2l0aF90YWJzIDogbm90IHNvZnRUYWJzXG5cbiAgICAjIEZyb20gUGFja2FnZSBTZXR0aW5nc1xuICAgIGNvbmZpZ09wdGlvbnMgPSBAZ2V0Q29uZmlnT3B0aW9uc0Zyb21TZXR0aW5ncyhsYW5ndWFnZU5hbWVzcGFjZXMpXG5cblxuICAgICMgR2V0IGNvbmZpZ3VyYXRpb24gaW4gVXNlcidzIEhvbWUgZGlyZWN0b3J5XG4gICAgdXNlckhvbWUgPSBAZ2V0VXNlckhvbWUoKVxuXG5cbiAgICAjIEZBS0VGSUxFTkFNRSBmb3JjZXMgYHBhdGhgIHRvIHRyZWF0IGFzIGZpbGUgcGF0aCBhbmQgaXRzIHBhcmVudCBkaXJlY3RvcnlcbiAgICAjIGlzIHRoZSB1c2VySG9tZS4gU2VlIGltcGxlbWVudGF0aW9uIG9mIGZpbmRDb25maWdcbiAgICAjIGFuZCBob3cgcGF0aC5kaXJuYW1lKERJUkVDVE9SWSkgcmV0dXJucyB0aGUgcGFyZW50IGRpcmVjdG9yeSBvZiBESVJFQ1RPUllcbiAgICBob21lT3B0aW9ucyA9IEBnZXRDb25maWcocGF0aC5qb2luKHVzZXJIb21lLCBcIkZBS0VGSUxFTkFNRVwiKSwgZmFsc2UpXG4gICAgaWYgZWRpdGVkRmlsZVBhdGg/XG5cbiAgICAgICMgSGFuZGxlIEVkaXRvckNvbmZpZyBvcHRpb25zXG4gICAgICAjIGh0dHA6Ly9lZGl0b3Jjb25maWcub3JnL1xuICAgICAgZWRpdG9yY29uZmlnID89IHJlcXVpcmUoJ2VkaXRvcmNvbmZpZycpXG4gICAgICBlZGl0b3JDb25maWdPcHRpb25zID0gZWRpdG9yY29uZmlnLnBhcnNlKGVkaXRlZEZpbGVQYXRoKVxuICAgICAgLnRoZW4oKGVkaXRvckNvbmZpZ09wdGlvbnMpIC0+XG5cbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ2VkaXRvckNvbmZpZ09wdGlvbnMnLCBlZGl0b3JDb25maWdPcHRpb25zKVxuXG4gICAgICAgICMgVHJhbnNmb3JtIEVkaXRvckNvbmZpZyB0byBBdG9tIEJlYXV0aWZ5J3MgY29uZmlnIHN0cnVjdHVyZSBhbmQgbmFtaW5nXG4gICAgICAgIGlmIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X3N0eWxlIGlzICdzcGFjZSdcbiAgICAgICAgICBlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9jaGFyID0gXCIgXCJcblxuICAgICAgICAjIGlmIChlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9zaXplKVxuICAgICAgICAjIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X3NpemUgPSBjb25maWcuaW5kZW50X3NpemVcbiAgICAgICAgZWxzZSBpZiBlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9zdHlsZSBpcyAndGFiJ1xuICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X2NoYXIgPSBcIlxcdFwiXG4gICAgICAgICAgZWRpdG9yQ29uZmlnT3B0aW9ucy5pbmRlbnRfd2l0aF90YWJzID0gdHJ1ZVxuICAgICAgICAgIGlmIChlZGl0b3JDb25maWdPcHRpb25zLnRhYl93aWR0aClcbiAgICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X3NpemUgPSBlZGl0b3JDb25maWdPcHRpb25zLnRhYl93aWR0aFxuXG4gICAgICAgICMgTmVzdCBvcHRpb25zIHVuZGVyIF9kZWZhdWx0IG5hbWVzcGFjZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIF9kZWZhdWx0OlxuICAgICAgICAgICAgZWRpdG9yQ29uZmlnT3B0aW9uc1xuICAgICAgICAgIH1cbiAgICAgIClcblxuICAgICAgIyBHZXQgYWxsIG9wdGlvbnMgaW4gY29uZmlndXJhdGlvbiBmaWxlcyBmcm9tIHRoaXMgZGlyZWN0b3J5IHVwd2FyZHMgdG8gcm9vdFxuICAgICAgcHJvamVjdE9wdGlvbnMgPSBbXVxuICAgICAgcCA9IHBhdGguZGlybmFtZShlZGl0ZWRGaWxlUGF0aClcblxuXG4gICAgICAjIENoZWNrIGlmIHAgaXMgcm9vdCAodG9wIGRpcmVjdG9yeSlcbiAgICAgIHdoaWxlIHAgaXNudCBwYXRoLnJlc29sdmUocCwgXCIuLi9cIilcblxuICAgICAgICAjIEdldCBjb25maWcgZm9yIHBcbiAgICAgICAgcGYgPSBwYXRoLmpvaW4ocCwgXCJGQUtFRklMRU5BTUVcIilcbiAgICAgICAgcGMgPSBAZ2V0Q29uZmlnKHBmLCBmYWxzZSlcblxuICAgICAgICBpc05lc3RlZCA9IEBpc05lc3RlZE9wdGlvbnMocGMpXG4gICAgICAgIHVubGVzcyBpc05lc3RlZFxuICAgICAgICAgIHBjID0ge1xuICAgICAgICAgICAgX2RlZmF1bHQ6IHBjXG4gICAgICAgICAgfVxuXG4gICAgICAgICMgQWRkIGNvbmZpZyBmb3IgcCB0byBwcm9qZWN0J3MgY29uZmlnIG9wdGlvbnNcbiAgICAgICAgcHJvamVjdE9wdGlvbnMucHVzaChwYylcblxuICAgICAgICAjIGxvZ2dlci52ZXJib3NlIHAsIHBjXG4gICAgICAgICMgTW92ZSB1cHdhcmRzXG4gICAgICAgIHAgPSBwYXRoLnJlc29sdmUocCwgXCIuLi9cIilcbiAgICBlbHNlXG4gICAgICBlZGl0b3JDb25maWdPcHRpb25zID0ge31cbiAgICAgIHByb2plY3RPcHRpb25zID0gW11cblxuICAgICMgQ29tYmluZSBhbGwgb3B0aW9ucyB0b2dldGhlclxuICAgIGFsbE9wdGlvbnMgPSBbXG4gICAgICB7XG4gICAgICAgIF9kZWZhdWx0OlxuICAgICAgICAgIGVkaXRvck9wdGlvbnNcbiAgICAgIH0sXG4gICAgICBjb25maWdPcHRpb25zLFxuICAgICAge1xuICAgICAgICBfZGVmYXVsdDpcbiAgICAgICAgICBob21lT3B0aW9uc1xuICAgICAgfSxcbiAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnNcbiAgICBdXG4gICAgIyBSZXZlcnNlIGFuZCBhZGQgcHJvamVjdE9wdGlvbnMgdG8gYWxsIG9wdGlvbnNcbiAgICBwcm9qZWN0T3B0aW9ucy5yZXZlcnNlKClcbiAgICBhbGxPcHRpb25zID0gYWxsT3B0aW9ucy5jb25jYXQocHJvamVjdE9wdGlvbnMpXG5cbiAgICAjIGxvZ2dlci52ZXJib3NlKGFsbE9wdGlvbnMpXG4gICAgcmV0dXJuIGFsbE9wdGlvbnNcblxuICBpc05lc3RlZE9wdGlvbnMgOiAoY3Vyck9wdGlvbnMpIC0+XG4gICAgY29udGFpbnNOZXN0ZWQgPSBmYWxzZVxuICAgIGtleSA9IHVuZGVmaW5lZFxuXG4gICAgIyBDaGVjayBpZiBhbHJlYWR5IG5lc3RlZCB1bmRlciBfZGVmYXVsdFxuICAgIGlmIGN1cnJPcHRpb25zLl9kZWZhdWx0XG4gICAgICByZXR1cm4gdHJ1ZVxuXG4gICAgIyBDaGVjayB0byBzZWUgaWYgY29uZmlnIGZpbGUgdXNlcyBuZXN0ZWQgb2JqZWN0IGZvcm1hdCB0byBzcGxpdCB1cCBqcy9jc3MvaHRtbCBvcHRpb25zXG4gICAgZm9yIGtleSBvZiBjdXJyT3B0aW9uc1xuXG4gICAgICAjIENoZWNrIGlmIGlzIHN1cHBvcnRlZCBsYW5ndWFnZVxuICAgICAgaWYgXy5pbmRleE9mKEBsYW5ndWFnZXMubmFtZXNwYWNlcywga2V5KSA+PSAwIGFuZCB0eXBlb2YgY3Vyck9wdGlvbnNba2V5XSBpcyBcIm9iamVjdFwiICMgQ2hlY2sgaWYgbmVzdGVkIG9iamVjdCAobW9yZSBvcHRpb25zIGluIHZhbHVlKVxuICAgICAgICBjb250YWluc05lc3RlZCA9IHRydWVcbiAgICAgICAgYnJlYWsgIyBGb3VuZCwgYnJlYWsgb3V0IG9mIGxvb3AsIG5vIG5lZWQgdG8gY29udGludWVcblxuICAgIHJldHVybiBjb250YWluc05lc3RlZFxuXG4gIGdldE9wdGlvbnMgOiAoc2VsZWN0aW9ucywgYWxsT3B0aW9ucykgPT5cbiAgICBzZWxmID0gdGhpc1xuICAgIF8gPz0gcmVxdWlyZShcImxvZGFzaFwiKVxuICAgIGV4dGVuZCA/PSByZXF1aXJlKFwiZXh0ZW5kXCIpXG5cbiAgICBsb2dnZXIudmVyYm9zZSgnZ2V0T3B0aW9ucyBzZWxlY3Rpb25zJywgc2VsZWN0aW9ucywgYWxsT3B0aW9ucylcblxuICAgICMgbG9nZ2VyLnZlcmJvc2Uoc2VsZWN0aW9uLCBhbGxPcHRpb25zKTtcbiAgICAjIFJlZHVjZSBhbGwgb3B0aW9ucyBpbnRvIGNvcnJlY3RseSBtZXJnZWQgb3B0aW9ucy5cbiAgICBvcHRpb25zID0gXy5yZWR1Y2UoYWxsT3B0aW9ucywgKHJlc3VsdCwgY3Vyck9wdGlvbnMpID0+XG4gICAgICBjb2xsZWN0ZWRDb25maWcgPSBjdXJyT3B0aW9ucy5fZGVmYXVsdCBvciB7fVxuICAgICAgY29udGFpbnNOZXN0ZWQgPSBAaXNOZXN0ZWRPcHRpb25zKGN1cnJPcHRpb25zKVxuICAgICAgbG9nZ2VyLnZlcmJvc2UoY29udGFpbnNOZXN0ZWQsIGN1cnJPcHRpb25zKVxuICAgICAgIyBsb2dnZXIudmVyYm9zZShjb250YWluc05lc3RlZCwgY3Vyck9wdGlvbnMpO1xuXG4gICAgICAjIENyZWF0ZSBhIGZsYXQgb2JqZWN0IG9mIGNvbmZpZyBvcHRpb25zIGlmIG5lc3RlZCBmb3JtYXQgd2FzIHVzZWRcbiAgICAgIHVubGVzcyBjb250YWluc05lc3RlZFxuICAgICAgICAjIF8ubWVyZ2UgY29sbGVjdGVkQ29uZmlnLCBjdXJyT3B0aW9uc1xuICAgICAgICBjdXJyT3B0aW9ucyA9IHtcbiAgICAgICAgICBfZGVmYXVsdDogY3Vyck9wdGlvbnNcbiAgICAgICAgfVxuXG4gICAgICAjIE1lcmdlIHdpdGggc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAgIyB3aGVyZSBgc2VsZWN0aW9uYCBjb3VsZCBiZSBgaHRtbGAsIGBqc2AsICdjc3MnLCBldGNcbiAgICAgIGZvciBzZWxlY3Rpb24gaW4gc2VsZWN0aW9uc1xuICAgICAgICAjIE1lcmdlIGN1cnJlbnQgb3B0aW9ucyBvbiB0b3Agb2YgZmFsbGJhY2sgb3B0aW9uc1xuICAgICAgICBsb2dnZXIudmVyYm9zZSgnb3B0aW9ucycsIHNlbGVjdGlvbiwgY3Vyck9wdGlvbnNbc2VsZWN0aW9uXSlcbiAgICAgICAgXy5tZXJnZSBjb2xsZWN0ZWRDb25maWcsIGN1cnJPcHRpb25zW3NlbGVjdGlvbl1cbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ29wdGlvbnMnLCBzZWxlY3Rpb24sIGNvbGxlY3RlZENvbmZpZylcblxuICAgICAgZXh0ZW5kIHJlc3VsdCwgY29sbGVjdGVkQ29uZmlnXG4gICAgLCB7fSlcblxuXG4gICAgIyBUT0RPOiBDbGVhbi5cbiAgICAjIFRoZXJlIGlzIGEgYnVnIGluIG5vcHRcbiAgICAjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbnBtL25vcHQvaXNzdWVzLzM4XG4gICAgIyBsb2dnZXIudmVyYm9zZSgncHJlLWNsZWFuJywgSlNPTi5zdHJpbmdpZnkob3B0aW9ucykpO1xuICAgICMgb3B0aW9ucyA9IGNsZWFuT3B0aW9ucyhvcHRpb25zLCBrbm93bk9wdHMpO1xuICAgICMgbG9nZ2VyLnZlcmJvc2UoJ3Bvc3QtY2xlYW4nLCBKU09OLnN0cmluZ2lmeShvcHRpb25zKSk7XG4gICAgb3B0aW9uc1xuIl19
