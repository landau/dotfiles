function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { var callNext = step.bind(null, 'next'); var callThrow = step.bind(null, 'throw'); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(callNext, callThrow); } } callNext(); }); }; }

var _jasmineFix = require('jasmine-fix');

var _libRegistry = require('../lib/registry');

var _libRegistry2 = _interopRequireDefault(_libRegistry);

describe('Registry', function () {
  var registry = undefined;

  beforeEach(function () {
    registry = new _libRegistry2['default']();
  });
  afterEach(function () {
    registry.dispose();
  });
  function validateOldTiles(oldTitles, titles) {
    expect(oldTitles.length).toBe(titles.length);

    titles.forEach(function (title, index) {
      expect(oldTitles[index].title).toBe(title);
      expect(oldTitles[index].duration === '1ms' || oldTitles[index].duration === '0ms').toBe(true);
    });
  }

  describe('handling of providers', function () {
    (0, _jasmineFix.it)('registers providers properly and clears them out when they die', function () {
      var provider = registry.create();
      expect(registry.providers.has(provider)).toBe(true);
      provider.dispose();
      expect(registry.providers.has(provider)).toBe(false);
    });
    (0, _jasmineFix.it)('emits update event properly', function () {
      var provider = registry.create();
      var update = jasmine.createSpy('update');
      registry.onDidUpdate(update);
      expect(update).not.toHaveBeenCalled();
      provider.add('Hey');
      provider.remove('Hey');
      provider.clear();
      expect(update).toHaveBeenCalled();
      expect(update.calls.length).toBe(2);
    });
    (0, _jasmineFix.it)('adds and returns sorted titles', _asyncToGenerator(function* () {
      var provider = registry.create();
      provider.add('Hey');
      yield (0, _jasmineFix.wait)(1);
      provider.add('Wow');
      yield (0, _jasmineFix.wait)(1);
      provider.add('Hello');
      expect(registry.getTilesActive()).toEqual(['Hey', 'Wow', 'Hello']);
    }));
    (0, _jasmineFix.it)('adds removed ones to history', _asyncToGenerator(function* () {
      var provider = registry.create();
      provider.add('Boy');
      yield (0, _jasmineFix.wait)(1);
      provider.add('Hey');
      expect(registry.getTilesActive()).toEqual(['Boy', 'Hey']);
      expect(registry.getTilesOld()).toEqual([]);

      provider.remove('Hey');
      expect(registry.getTilesActive()).toEqual(['Boy']);
      validateOldTiles(registry.getTilesOld(), ['Hey']);
    }));
    (0, _jasmineFix.it)('adds cleared ones to history', function () {
      var provider = registry.create();
      provider.add('Hello');
      provider.add('World');

      expect(registry.getTilesActive()).toEqual(['Hello', 'World']);
      expect(registry.getTilesOld()).toEqual([]);

      provider.clear();
      expect(registry.getTilesActive()).toEqual([]);
      validateOldTiles(registry.getTilesOld(), ['Hello', 'World']);
    });
  });
  describe('getTilesOld', function () {
    (0, _jasmineFix.it)('excludes active ones from history', function () {
      var provider = registry.create();
      provider.add('Yo CJ');
      provider.add('Murica');
      provider.remove('Yo CJ');
      provider.remove('Murica');
      provider.add('Yo CJ');

      validateOldTiles(registry.getTilesOld(), ['Murica']);
    });
    (0, _jasmineFix.it)('excludes duplicates and only returns the last one', function () {
      var provider = registry.create();

      provider.add('Some');
      provider.add('Things');
      provider.remove('Some');
      provider.remove('Things');
      provider.add('Some');
      provider.remove('Some');

      validateOldTiles(registry.getTilesOld(), ['Things', 'Some']);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90bGFuZGF1Ly5hdG9tL3BhY2thZ2VzL2J1c3ktc2lnbmFsL3NwZWMvcmVnaXN0cnktc3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OzBCQUV5QixhQUFhOzsyQkFDakIsaUJBQWlCOzs7O0FBRXRDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsWUFBVztBQUM5QixNQUFJLFFBQVEsWUFBQSxDQUFBOztBQUVaLFlBQVUsQ0FBQyxZQUFXO0FBQ3BCLFlBQVEsR0FBRyw4QkFBYyxDQUFBO0dBQzFCLENBQUMsQ0FBQTtBQUNGLFdBQVMsQ0FBQyxZQUFXO0FBQ25CLFlBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtHQUNuQixDQUFDLENBQUE7QUFDRixXQUFTLGdCQUFnQixDQUFDLFNBQXFELEVBQUUsTUFBcUIsRUFBRTtBQUN0RyxVQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUE7O0FBRTVDLFVBQU0sQ0FBQyxPQUFPLENBQUMsVUFBUyxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ3BDLFlBQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzFDLFlBQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxLQUFLLEtBQUssSUFBSSxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxLQUFLLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtLQUM5RixDQUFDLENBQUE7R0FDSDs7QUFFRCxVQUFRLENBQUMsdUJBQXVCLEVBQUUsWUFBVztBQUMzQyx3QkFBRyxnRUFBZ0UsRUFBRSxZQUFXO0FBQzlFLFVBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtBQUNsQyxZQUFNLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMs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TUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBQ3ZCLGNBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUE7QUFDekIsY0FBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtBQUNwQixjQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFBOztBQUV2QixzQkFBZ0IsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQTtLQUM3RCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7Q0FDSCxDQUFDLENBQUEiLCJmaWxlIjoiL1VzZXJzL3RsYW5kYXUvLmF0b20vcGFja2FnZXMvYnVzeS1zaWduYWwvc3BlYy9yZWdpc3RyeS1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IHsgaXQsIHdhaXQgfSBmcm9tICdqYXNtaW5lLWZpeCdcbmltcG9ydCBSZWdpc3RyeSBmcm9tICcuLi9saWIvcmVnaXN0cnknXG5cbmRlc2NyaWJlKCdSZWdpc3RyeScsIGZ1bmN0aW9uKCkge1xuICBsZXQgcmVnaXN0cnlcblxuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xuICAgIHJlZ2lzdHJ5ID0gbmV3IFJlZ2lzdHJ5KClcbiAgfSlcbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xuICAgIHJlZ2lzdHJ5LmRpc3Bvc2UoKVxuICB9KVxuICBmdW5jdGlvbiB2YWxpZGF0ZU9sZFRpbGVzKG9sZFRpdGxlczogQXJyYXk8eyB0aXRsZTogc3RyaW5nLCBkdXJhdGlvbjogc3RyaW5nIH0+LCB0aXRsZXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICBleHBlY3Qob2xkVGl0bGVzLmxlbmd0aCkudG9CZSh0aXRsZXMubGVuZ3RoKVxuXG4gICAgdGl0bGVzLmZvckVhY2goZnVuY3Rpb24odGl0bGUsIGluZGV4KSB7XG4gICAgICBleHBlY3Qob2xkVGl0bGVzW2luZGV4XS50aXRsZSkudG9CZSh0aXRsZSlcbiAgICAgIGV4cGVjdChvbGRUaXRsZXNbaW5kZXhdLmR1cmF0aW9uID09PSAnMW1zJyB8fCBvbGRUaXRsZXNbaW5kZXhdLmR1cmF0aW9uID09PSAnMG1zJykudG9CZSh0cnVlKVxuICAgIH0pXG4gIH1cblxuICBkZXNjcmliZSgnaGFuZGxpbmcgb2YgcHJvdmlkZXJzJywgZnVuY3Rpb24oKSB7XG4gICAgaXQoJ3JlZ2lzdGVycyBwcm92aWRlcnMgcHJvcGVybHkgYW5kIGNsZWFycyB0aGVtIG91dCB3aGVuIHRoZXkgZGllJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IHJlZ2lzdHJ5LmNyZWF0ZSgpXG4gICAgICBleHBlY3QocmVnaXN0cnkucHJvdmlkZXJzLmhhcyhwcm92aWRlcikpLnRvQmUodHJ1ZSlcbiAgICAgIHByb3ZpZGVyLmRpc3Bvc2UoKVxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LnByb3ZpZGVycy5oYXMocHJvdmlkZXIpKS50b0JlKGZhbHNlKVxuICAgIH0pXG4gICAgaXQoJ2VtaXRzIHVwZGF0ZSBldmVudCBwcm9wZXJseScsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSByZWdpc3RyeS5jcmVhdGUoKVxuICAgICAgY29uc3QgdXBkYXRlID0gamFzbWluZS5jcmVhdGVTcHkoJ3VwZGF0ZScpXG4gICAgICByZWdpc3RyeS5vbkRpZFVwZGF0ZSh1cGRhdGUpXG4gICAgICBleHBlY3QodXBkYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICBwcm92aWRlci5hZGQoJ0hleScpXG4gICAgICBwcm92aWRlci5yZW1vdmUoJ0hleScpXG4gICAgICBwcm92aWRlci5jbGVhcigpXG4gICAgICBleHBlY3QodXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIGV4cGVjdCh1cGRhdGUuY2FsbHMubGVuZ3RoKS50b0JlKDIpXG4gICAgfSlcbiAgICBpdCgnYWRkcyBhbmQgcmV0dXJucyBzb3J0ZWQgdGl0bGVzJywgYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IHJlZ2lzdHJ5LmNyZWF0ZSgpXG4gICAgICBwcm92aWRlci5hZGQoJ0hleScpXG4gICAgICBhd2FpdCB3YWl0KDEpXG4gICAgICBwcm92aWRlci5hZGQoJ1dvdycpXG4gICAgICBhd2FpdCB3YWl0KDEpXG4gICAgICBwcm92aWRlci5hZGQoJ0hlbGxvJylcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5nZXRUaWxlc0FjdGl2ZSgpKS50b0VxdWFsKFsnSGV5JywgJ1dvdycsICdIZWxsbyddKVxuICAgIH0pXG4gICAgaXQoJ2FkZHMgcmVtb3ZlZCBvbmVzIHRvIGhpc3RvcnknLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gcmVnaXN0cnkuY3JlYXRlKClcbiAgICAgIHByb3ZpZGVyLmFkZCgnQm95JylcbiAgICAgIGF3YWl0IHdhaXQoMSlcbiAgICAgIHByb3ZpZGVyLmFkZCgnSGV5JylcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5nZXRUaWxlc0FjdGl2ZSgpKS50b0VxdWFsKFsnQm95JywgJ0hleSddKVxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LmdldFRpbGVzT2xkKCkpLnRvRXF1YWwoW10pXG5cbiAgICAgIHByb3ZpZGVyLnJlbW92ZSgnSGV5JylcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5nZXRUaWxlc0FjdGl2ZSgpKS50b0VxdWFsKFsnQm95J10pXG4gICAgICB2YWxpZGF0ZU9sZFRpbGVzKHJlZ2lzdHJ5LmdldFRpbGVzT2xkKCksIFsnSGV5J10pXG4gICAgfSlcbiAgICBpdCgnYWRkcyBjbGVhcmVkIG9uZXMgdG8gaGlzdG9yeScsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSByZWdpc3RyeS5jcmVhdGUoKVxuICAgICAgcHJvdmlkZXIuYWRkKCdIZWxsbycpXG4gICAgICBwcm92aWRlci5hZGQoJ1dvcmxkJylcblxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LmdldFRpbGVzQWN0aXZlKCkpLnRvRXF1YWwoWydIZWxsbycsICdXb3JsZCddKVxuICAgICAgZXhwZWN0KHJlZ2lzdHJ5LmdldFRpbGVzT2xkKCkpLnRvRXF1YWwoW10pXG5cbiAgICAgIHByb3ZpZGVyLmNsZWFyKClcbiAgICAgIGV4cGVjdChyZWdpc3RyeS5nZXRUaWxlc0FjdGl2ZSgpKS50b0VxdWFsKFtdKVxuICAgICAgdmFsaWRhdGVPbGRUaWxlcyhyZWdpc3RyeS5nZXRUaWxlc09sZCgpLCBbJ0hlbGxvJywgJ1dvcmxkJ10pXG4gICAgfSlcbiAgfSlcbiAgZGVzY3JpYmUoJ2dldFRpbGVzT2xkJywgZnVuY3Rpb24oKSB7XG4gICAgaXQoJ2V4Y2x1ZGVzIGFjdGl2ZSBvbmVzIGZyb20gaGlzdG9yeScsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSByZWdpc3RyeS5jcmVhdGUoKVxuICAgICAgcHJvdmlkZXIuYWRkKCdZbyBDSicpXG4gICAgICBwcm92aWRlci5hZGQoJ011cmljYScpXG4gICAgICBwcm92aWRlci5yZW1vdmUoJ1lvIENKJylcbiAgICAgIHByb3ZpZGVyLnJlbW92ZSgnTXVyaWNhJylcbiAgICAgIHByb3ZpZGVyLmFkZCgnWW8gQ0onKVxuXG4gICAgICB2YWxpZGF0ZU9sZFRpbGVzKHJlZ2lzdHJ5LmdldFRpbGVzT2xkKCksIFsnTXVyaWNhJ10pXG4gICAgfSlcbiAgICBpdCgnZXhjbHVkZXMgZHVwbGljYXRlcyBhbmQgb25seSByZXR1cm5zIHRoZSBsYXN0IG9uZScsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSByZWdpc3RyeS5jcmVhdGUoKVxuXG4gICAgICBwcm92aWRlci5hZGQoJ1NvbWUnKVxuICAgICAgcHJvdmlkZXIuYWRkKCdUaGluZ3MnKVxuICAgICAgcHJvdmlkZXIucmVtb3ZlKCdTb21lJylcbiAgICAgIHByb3ZpZGVyLnJlbW92ZSgnVGhpbmdzJylcbiAgICAgIHByb3ZpZGVyLmFkZCgnU29tZScpXG4gICAgICBwcm92aWRlci5yZW1vdmUoJ1NvbWUnKVxuXG4gICAgICB2YWxpZGF0ZU9sZFRpbGVzKHJlZ2lzdHJ5LmdldFRpbGVzT2xkKCksIFsnVGhpbmdzJywgJ1NvbWUnXSlcbiAgICB9KVxuICB9KVxufSlcbiJdfQ==