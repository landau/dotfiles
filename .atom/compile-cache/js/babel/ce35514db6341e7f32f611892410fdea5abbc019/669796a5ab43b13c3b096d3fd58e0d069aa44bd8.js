function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _libIndieDelegate = require('../lib/indie-delegate');

var _libIndieDelegate2 = _interopRequireDefault(_libIndieDelegate);

var _common = require('./common');

describe('IndieDelegate', function () {
  var indieDelegate = undefined;
  var indieDelegateLegacy = undefined;

  beforeEach(function () {
    indieDelegate = new _libIndieDelegate2['default']({
      name: 'Indie'
    }, 2);
    indieDelegateLegacy = new _libIndieDelegate2['default']({
      name: 'Indie Legacy'
    }, 1);
  });
  afterEach(function () {
    indieDelegate.dispose();
    indieDelegateLegacy.dispose();
  });

  it('has the basic linter properties', function () {
    expect(typeof indieDelegate.name).toBe('string');
    expect(indieDelegate.name).toBe('Indie');
    expect(typeof indieDelegate.scope).toBe('string');
    expect(indieDelegate.scope).toBe('project');
  });
  describe('::setMessages && ::getMessages && ::clearMessages', function () {
    it('works as expected', function () {
      var message = (0, _common.getMessage)(false);
      expect(indieDelegate.getMessages()).toEqual([]);
      indieDelegate.setMessages(message.location.file, [message]);
      expect(indieDelegate.getMessages()).toEqual([message]);
      indieDelegate.clearMessages();
      expect(indieDelegate.getMessages()).toEqual([]);
    });
  });
  describe('::setMessages', function () {
    it('overwrites previous messages for that file', function () {
      var messageA = (0, _common.getMessage)(false);
      var messageB = (0, _common.getMessage)(false);
      var messageC = (0, _common.getMessage)(false);
      expect(indieDelegate.getMessages()).toEqual([]);
      indieDelegate.setMessages(messageA.location.file, [messageA, messageB]);
      expect(indieDelegate.getMessages()).toEqual([messageA, messageB]);
      indieDelegate.setMessages(messageA.location.file, [messageA, messageC]);
      expect(indieDelegate.getMessages()).toEqual([messageA, messageC]);
      indieDelegate.setMessages(messageA.location.file, [messageB, messageC]);
      expect(indieDelegate.getMessages()).toEqual([messageB, messageC]);
      indieDelegate.setMessages(messageA.location.file, [messageC]);
      expect(indieDelegate.getMessages()).toEqual([messageC]);
      indieDelegate.setMessages(messageA.location.file, []);
      expect(indieDelegate.getMessages()).toEqual([]);
    });
    it('does not update if is disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.dispose();
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
    });
    it('does update if not disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(2);
    });
    it('cries if message has a different filePath', function () {
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      }).not.toThrow();
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(__filename), (0, _common.getMessage)(__filename)]);
      }).not.toThrow();
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(false)]);
      }).toThrow('message.location.file does not match the given filePath');
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(false)]);
      }).toThrow('message.location.file does not match the given filePath');
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(false), (0, _common.getMessage)(__filename)]);
      }).toThrow('message.location.file does not match the given filePath');
      expect(function () {
        indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename), (0, _common.getMessage)(__filename), (0, _common.getMessage)(false)]);
      }).toThrow('message.location.file does not match the given filePath');
    });
    it('does not add invalid messages', function () {
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(0);
      indieDelegate.setMessages(__filename, [{}]);
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(1);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(indieDelegate.getMessages().length).toBe(1);
      expect(atom.notifications.getNotifications().length).toBe(1);
    });
  });
  describe('::clearMessages', function () {
    it('does not update if disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.dispose();
      indieDelegate.clearMessages();
      expect(timesUpdated).toBe(1);
    });
    it('does update if not disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setMessages(__filename, [(0, _common.getMessage)(__filename)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.clearMessages();
      expect(timesUpdated).toBe(2);
    });
  });
  describe('::setAllMessages', function () {
    it('automatically splits messages into filePath groups', function () {
      var messageA = (0, _common.getMessage)(false);
      var messageB = (0, _common.getMessage)(false);
      var messageC = (0, _common.getMessage)(false);
      var messageD = (0, _common.getMessage)(false);

      messageC.location.file = __filename;
      messageD.location.file = __filename;
      expect(indieDelegate.messages.size).toBe(0);
      indieDelegate.setAllMessages([messageA, messageB, messageC, messageD]);
      expect(indieDelegate.messages.size).toBe(2);

      var messagesA = indieDelegate.messages.get(messageA.location.file);
      expect(Array.isArray(messagesA)).toBe(true);
      expect(messagesA).toEqual([messageA, messageB]);

      var messagesB = indieDelegate.messages.get(messageC.location.file);
      expect(Array.isArray(messagesB)).toBe(true);
      expect(messagesB).toEqual([messageC, messageD]);
    });
    it('does not update if disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setAllMessages([(0, _common.getMessage)(false)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.dispose();
      indieDelegate.setAllMessages([]);
      expect(timesUpdated).toBe(1);
    });
    it('does update if not disposed', function () {
      var timesUpdated = 0;
      indieDelegate.onDidUpdate(function () {
        timesUpdated++;
      });
      expect(timesUpdated).toBe(0);
      indieDelegate.setAllMessages([(0, _common.getMessage)(false)]);
      expect(timesUpdated).toBe(1);
      indieDelegate.setAllMessages([]);
      expect(timesUpdated).toBe(2);
    });
    it('does not add invalid messages', function () {
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(0);
      indieDelegate.setAllMessages([{}]);
      expect(indieDelegate.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(1);
      indieDelegate.setAllMessages([(0, _common.getMessage)(__filename)]);
      expect(indieDelegate.getMessages().length).toBe(1);
      expect(atom.notifications.getNotifications().length).toBe(1);
    });
  });
  describe('::dispose', function () {
    it('clears messages', function () {
      indieDelegate.setAllMessages([(0, _common.getMessage)(false)]);
      expect(indieDelegate.messages.size).toBe(1);
      indieDelegate.dispose();
      expect(indieDelegate.messages.size).toBe(0);
    });
    it('emits did-destroy event', function () {
      var didDestroy = false;
      indieDelegate.onDidDestroy(function () {
        didDestroy = true;
      });
      expect(didDestroy).toBe(false);
      indieDelegate.dispose();
      expect(didDestroy).toBe(true);
    });
  });
  describe('Legacy features', function () {
    it('has a deleteMessages() has throws on newer version', function () {
      expect(function () {
        indieDelegate.deleteMessages();
      }).toThrow('Call to depreciated method deleteMessages(). Use clearMessages() insead');
    });
    it('has a setMessages() that throws when called with old signature', function () {
      expect(function () {
        indieDelegate.setMessages([]);
      }).toThrow('Invalid Parameters to setMessages()');
    });
    it('sets and clears messages properly on legacy version', function () {
      indieDelegateLegacy.setMessages([(0, _common.getMessageLegacy)(false)]);
      expect(indieDelegateLegacy.getMessages().length).toBe(1);
      indieDelegateLegacy.deleteMessages();
      expect(indieDelegateLegacy.getMessages().length).toBe(0);
    });
    it('does not add invalid messages', function () {
      expect(indieDelegateLegacy.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(0);

      indieDelegateLegacy.setMessages([{}]);
      expect(indieDelegateLegacy.getMessages().length).toBe(0);
      expect(atom.notifications.getNotifications().length).toBe(1);

      indieDelegateLegacy.setMessages([(0, _common.getMessageLegacy)(false)]);
      expect(indieDelegateLegacy.getMessages().length).toBe(1);
      expect(atom.notifications.getNotifications().length).toBe(1);
    });
  });
  describe('::onDidUpdate', function () {
    it('includes all of the messages', function () {
      var messagesA = [(0, _common.getMessage)('a'), (0, _common.getMessage)('a'), (0, _common.getMessage)('a'), (0, _common.getMessage)('a'), (0, _common.getMessage)('a')];
      var messagesB = [(0, _common.getMessage)('b'), (0, _common.getMessage)('b'), (0, _common.getMessage)('b'), (0, _common.getMessage)('b'), (0, _common.getMessage)('b')];
      var spyCallback = jasmine.createSpy('onDidUpdate');
      indieDelegate.onDidUpdate(spyCallback);
      indieDelegate.setMessages('a', messagesA);
      indieDelegate.setMessages('b', messagesB);
      indieDelegate.clearMessages();
      expect(spyCallback.calls.length).toBe(3);
      expect(spyCallback.calls[0].args[0]).toEqual(messagesA);
      expect(spyCallback.calls[1].args[0]).toEqual(messagesA.concat(messagesB));
      expect(spyCallback.calls[2].args[0]).toEqual([]);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90bGFuZGF1Ly5hdG9tL3BhY2thZ2VzL2xpbnRlci9zcGVjL2luZGllLWRlbGVnYXRlLXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Z0NBRTBCLHVCQUF1Qjs7OztzQkFDSixVQUFVOztBQUV2RCxRQUFRLENBQUMsZUFBZSxFQUFFLFlBQVc7QUFDbkMsTUFBSSxhQUFhLFlBQUEsQ0FBQTtBQUNqQixNQUFJLG1CQUFtQixZQUFBLENBQUE7O0FBRXZCLFlBQVUsQ0FBQyxZQUFXO0FBQ3BCLGlCQUFhLEdBQUcsa0NBQWtCO0FBQ2hDLFVBQUksRUFBRSxPQUFPO0tBQ2QsRUFBRSxDQUFDLENBQUMsQ0FBQTtBQUNMLHVCQUFtQixHQUFHLGtDQUFrQjtBQUN0QyxVQUFJLEVBQUUsY0FBYztLQUNyQixFQUFFLENBQUMsQ0FBQyxDQUFBO0dBQ04sQ0FBQyxDQUFBO0FBQ0YsV0FBUyxDQUFDLFlBQVc7QUFDbkIsaUJBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtBQUN2Qix1QkFBbUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtHQUM5QixDQUFDLENBQUE7O0FBRUYsSUFBRSxDQUFDLGlDQUFpQyxFQUFFLFlBQVc7QUFDL0MsVUFBTSxDQUFDLE9BQU8sYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtBQUNoRCxVQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtBQUN4QyxVQUFNLENBQUMsT0FBTyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FBQ2pELFVBQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0dBQzVDLENBQUMsQ0FBQTtBQUNGLFVBQVEsQ0FBQyxtREFBbUQsRUFBRSxZQUFXO0FBQ3ZFLE1BQUUsQ0FBQyxtQkFBbUIsRUFBRSxZQUFXO0FBQ2pDLFVBQU0sT0FBTyxHQUFHLHdCQUFXLEtBQUssQ0FBQyxDQUFBO0FBQ2pDLFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUE7QUFDL0MsbUJBQWEsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO0FBQzNELFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO0FBQ3RELG1CQUFhLENBQUMsYUFBYSxFQUFFLENBQUE7QUFDN0IsWUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQTtLQUNoRCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7QUFDRixVQUFRLENBQUMsZUFBZSxFQUFFLFlBQVc7QUFDbkMsTUFBRSxDQUFDLDRDQUE0QyxFQUFFLFlBQVc7QUFDMUQsVUFBTSxRQUFRLEdBQUcsd0JBQVcsS0FBSyxDQUFDLENBQUE7QUFDbEMsVUFBTSxRQUFRLEdBQUcsd0JBQVcsS0FBSyxDQUFDLENBQUE7QUFDbEMsVUFBTSxRQUFRLEdBQUcsd0JBQVcsS0FBSyxDQUFDLENBQUE7QUFDbEMsWUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUMvQyxtQkFBYSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFBO0FBQ3ZFLFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQTtBQUNqRSxtQkFBYSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFBO0FBQ3ZFLFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQTtBQUNqRSxtQkFBYSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFBO0FBQ3ZFLFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQTtBQUNqRSxtQkFBYSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUE7QUFDN0QsWUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUE7QUFDdkQsbUJBQWEsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUE7QUFDckQsWUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQTtLQUNoRCxDQUFDLENBQUE7QUFDRixNQUFFLENBQUMsZ0NBQWdDLEVBQUUsWUFBVztBQUM5QyxVQUFJLFlBQVksR0FBRyxDQUFDLENBQUE7QUFDcEIsbUJBQWEsQ0FBQyxXQUFXLENBQUMsWUFBVztBQUNuQyxvQkFBWSxFQUFFLENBQUE7T0FDZixDQUFDLENBQUE7QUFDRixZQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzVCLG1CQUFhLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxDQUFDLHdCQUFXLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMvRCxZQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzVCLG1CQUFhLENBQUMsT0FBTyxFQUFFLENBQUE7QUFDdkIsbUJBQWEsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUMsd0JBQVcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQy9ELFlBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDN0IsQ0FBQyxDQUFBO0FBQ0YsTUFBRSxDQUFDLDZCQUE2QixFQUFFLFlBQVc7QUFDM0MsVUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFBO0FBQ3BCLG1CQUFhLENBQUMsV0FBVyxDQUFDLFlBQVc7QUFDbkMsb0JBQVksRUFBRSxDQUFBO09BQ2YsQ0FBQyxDQUFBO0FBQ0YsWUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM1QixtQkFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBVyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDL0QsWUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM1QixtQkFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBVyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDL0QsWUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUM3QixDQUFDLENBQUE7QUFDRixNQUFFLENBQUMsMkNBQTJDLEVBQUUsWUFBVztBQUN6RCxZQUFNLENBQUMsWUFBVztBQUNoQixxQkFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBVyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7T0FDaEUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtBQUNoQixZQUFNLENBQUMsWUFBVztBQUNoQixxQkFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBVyxVQUFVLENBQUMsRUFBRSx3QkFBVyxVQUFVLENBQUMsRUFBRSx3QkFBVyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7T0FDaEgsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtBQUNoQixZQUFNLENBQUMsWUFBVztBQUNoQixxQkFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBVyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7T0FDM0QsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5REFBeUQsQ0FBQyxDQUFBO0FBQ3JFLFlBQU0sQ0FBQyxZQUFXO0FBQ2hCLHFCQUFhLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxDQUFDLHdCQUFXLFVBQVUsQ0FBQyxFQUFFLHdCQUFXLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtPQUNuRixDQUFDLENBQUMsT0FBTyxDQUFDLHlEQUF5RCxDQUFDLENBQUE7QUFDckUsWUFBTSxDQUFDLFlBQVc7QUFDaEIscUJBQWEsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUMsd0JBQVcsVUFBVSxDQUFDLEVBQUUsd0JBQVcsS0FBSyxDQUFDLEVBQUUsd0JBQVcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFBO09BQzNHLENBQUMsQ0FBQyxPQUFPLENBQUMseURBQXlELENBQUMsQ0FBQTtBQUNyRSxZQUFNLENBQUMsWUFBVztBQUNoQixxQkFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBVyxVQUFVLENBQUMsRUFBRSx3QkFBVyxVQUFVLENBQUMsRUFBRSx3QkFBVyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7T0FDM0csQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5REFBeUQsQ0FBQyxDQUFBO0tBQ3RFLENBQUMsQ0FBQTtBQUNGLE1BQUUsQ0FBQywrQkFBK0IsRUFBRSxZQUFXO0FBQzdDLFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2xELFlBQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzVELG1CQUFhLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7QUFDM0MsWUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDbEQsWUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDNUQsbUJBQWEsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUMsd0JBQVcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQy9ELFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2xELFlBQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQzdELENBQUMsQ0FBQTtHQUNILENBQUMsQ0FBQTtBQUNGLFVBQVEsQ0FBQyxpQkFBaUIsRUFBRSxZQUFXO0FBQ3JDLE1BQUUsQ0FBQyw2QkFBNkIsRUFBRSxZQUFXO0FBQzNDLFVBQUksWUFBWSxHQUFHLENBQUMsQ0FBQTtBQUNwQixtQkFBYSxDQUFDLFdBQVcsQ0FBQyxZQUFXO0FBQ25DLG9CQUFZLEVBQUUsQ0FBQTtPQUNmLENBQUMsQ0FBQTtBQUNGLFlBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDNUIsbUJBQWEsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUMsd0JBQVcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQy9ELFlBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDNUIsbUJBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtBQUN2QixtQkFBYSxDQUFDLGFBQWEsRUFBRSxDQUFBO0FBQzdCLFlBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDN0IsQ0FBQyxDQUFBO0FBQ0YsTUFBRSxDQUFDLDZCQUE2QixFQUFFLFlBQVc7QUFDM0MsVUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFBO0FBQ3BCLG1CQUFhLENBQUMsV0FBVyxDQUFDLFlBQVc7QUFDbkMsb0JBQVksRUFBRSxDQUFBO09BQ2YsQ0FBQyxDQUFBO0FBQ0YsWUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM1QixtQkFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyx3QkFBVyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDL0QsWUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM1QixtQkFBYSxDQUFDLGFBQWEsRUFBRSxDQUFBO0FBQzdCLFlBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FDN0IsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBO0FBQ0YsVUFBUSxDQUFDLGtCQUFrQixFQUFFLFlBQVc7QUFDdEMsTUFBRSxDQUFDLG9EQUFvRCxFQUFFLFlBQVc7QUFDbEUsVUFBTSxRQUFRLEdBQUcsd0JBQVcsS0FBSyxDQUFDLENBQUE7QUFDbEMsVUFBTSxRQUFRLEdBQUcsd0JBQVcsS0FBSyxDQUFDLENBQUE7QUFDbEMsVUFBTSxRQUFRLEdBQUcsd0JBQVcsS0FBSyxDQUFDLENBQUE7QUFDbEMsVUFBTSxRQUFRLEdBQUcsd0JBQVcsS0FBSyxDQUFDLENBQUE7O0FBRWxDLGNBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQTtBQUNuQyxjQUFRLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxVQUFVLENBQUE7QUFDbkMsWUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzNDLG1CQUFhLENBQUMsY0FBYyxDQUFDLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQTtBQUN0RSxZQUFNLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7O0FBRTNDLFVBQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7QUFDcEUsWUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7QUFDM0MsWUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFBOztBQUUvQyxVQUFNLFNBQVMsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFBO0FBQ3BFLFlBQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0FBQzNDLFlBQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQTtLQUNoRCxDQUFDLENBQUE7QUFDRixNQUFFLENBQUMsNkJBQTZCLEVBQUUsWUFBVztBQUMzQyxVQUFJLFlBQVksR0FBRyxDQUFDLENBQUE7QUFDcEIsbUJBQWEsQ0FBQyxXQUFXLENBQUMsWUFBVztBQUNuQyxvQkFBWSxFQUFFLENBQUE7T0FDZixDQUFDLENBQUE7QUFDRixZQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzVCLG1CQUFhLENBQUMsY0FBYyxDQUFDLENBQUMsd0JBQVcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2pELFlBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDNUIsbUJBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtBQUN2QixtQkFBYSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUNoQyxZQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQzdCLENBQUMsQ0FBQTtBQUNGLE1BQUUsQ0FBQyw2QkFBNkIsRUFBRSxZQUFXO0FBQzNDLFVBQUksWUFBWSxHQUFHLENBQUMsQ0FBQTtBQUNwQixtQkFBYSxDQUFDLFdBQVcsQ0FBQyxZQUFXO0FBQ25DLG9CQUFZLEVBQUUsQ0FBQTtPQUNmLENBQUMsQ0FBQTtBQUNGLFlBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDNUIsbUJBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQyx3QkFBVyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakQsWUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM1QixtQkFBYSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQTtBQUNoQyxZQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQzdCLENBQUMsQ0FBQTtBQUNGLE1BQUUsQ0FBQywrQkFBK0IsRUFBRSxZQUFXO0FBQzdDLFlBQU0sQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2xELFlBQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzVELG1CQUFhLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtBQUNsQyxZQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNsRCxZQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM1RCxtQkFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLHdCQUFXLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUN0RCxZQUFNLENBQUMsYUFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNsRCxZQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUM3RCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7QUFDRixVQUFRLENBQUMsV0FBVyxFQUFFLFlBQVc7QUFDL0IsTUFBRSxDQUFDLGlCQUFpQixFQUFFLFlBQVc7QUFDL0IsbUJBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQyx3QkFBVyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDakQsWUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzNDLG1CQUFhLENBQUMsT0FBTyxFQUFFLENBQUE7QUFDdkIsWUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0tBQzVDLENBQUMsQ0FBQTtBQUNGLE1BQUUsQ0FBQyx5QkFBeUIsRUFBRSxZQUFXO0FBQ3ZDLFVBQUksVUFBVSxHQUFHLEtBQUssQ0FBQTtBQUN0QixtQkFBYSxDQUFDLFlBQVksQ0FBQyxZQUFXO0FBQ3BDLGtCQUFVLEdBQUcsSUFBSSxDQUFBO09BQ2xCLENBQUMsQ0FBQTtBQUNGLFlBQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDOUIsbUJBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtBQUN2QixZQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0tBQzlCLENBQUMsQ0FBQTtHQUNILENBQUMsQ0FBQTtBQUNGLFVBQVEsQ0FBQyxpQkFBaUIsRUFBRSxZQUFXO0FBQ3JDLE1BQUUsQ0FBQyxvREFBb0QsRUFBRSxZQUFXO0FBQ2xFLFlBQU0sQ0FBQyxZQUFXO0FBQ2hCLHFCQUFhLENBQUMsY0FBYyxFQUFFLENBQUE7T0FDL0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyx5RUFBeUUsQ0FBQyxDQUFBO0tBQ3RGLENBQUMsQ0FBQTtBQUNGLE1BQUUsQ0FBQyxnRUFBZ0UsRUFBRSxZQUFXO0FBQzlFLFlBQU0sQ0FBQyxZQUFXO0FBQ2hCLHFCQUFhLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFBO09BQzlCLENBQUMsQ0FBQyxPQUFPLENBQUMscUNBQXFDLENBQUMsQ0FBQTtLQUNsRCxDQUFDLENBQUE7QUFDRixNQUFFLENBQUMscURBQXFELEVBQUUsWUFBVztBQUNuRSx5QkFBbUIsQ0FBQyxXQUFXLENBQUMsQ0FBQyw4QkFBaUIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFELFlBQU0sQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDeEQseUJBQW1CLENBQUMsY0FBYyxFQUFFLENBQUE7QUFDcEMsWUFBTSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUN6RCxDQUFDLENBQUE7QUFDRixNQUFFLENBQUMsK0JBQStCLEVBQUUsWUFBVztBQUM3QyxZQUFNLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3hELFlBQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBOztBQUU1RCx5QkFBbUIsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQ3JDLFlBQU0sQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDeEQsWUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7O0FBRTVELHlCQUFtQixDQUFDLFdBQVcsQ0FBQyxDQUFDLDhCQUFpQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDMUQsWUFBTSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUN4RCxZQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUM3RCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7QUFDRixVQUFRLENBQUMsZUFBZSxFQUFFLFlBQVc7QUFDbkMsTUFBRSxDQUFDLDhCQUE4QixFQUFFLFlBQVc7QUFDNUMsVUFBTSxTQUFTLEdBQUcsQ0FBQyx3QkFBVyxHQUFHLENBQUMsRUFBRSx3QkFBVyxHQUFHLENBQUMsRUFBRSx3QkFBVyxHQUFHLENBQUMsRUFBRSx3QkFBVyxHQUFHLENBQUMsRUFBRSx3QkFBVyxHQUFHLENBQUMsQ0FBQyxDQUFBO0FBQ3ZHLFVBQU0sU0FBUyxHQUFHLENBQUMsd0JBQVcsR0FBRyxDQUFDLEVBQUUsd0JBQVcsR0FBRyxDQUFDLEVBQUUsd0JBQVcsR0FBRyxDQUFDLEVBQUUsd0JBQVcsR0FBRyxDQUFDLEVBQUUsd0JBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQTtBQUN2RyxVQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFBO0FBQ3BELG1CQUFhLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFBO0FBQ3RDLG1CQUFhLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQTtBQUN6QyxtQkFBYSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUE7QUFDekMsbUJBQWEsQ0FBQyxhQUFhLEVBQUUsQ0FBQTtBQUM3QixZQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDeEMsWUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO0FBQ3ZELFlBQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUE7QUFDekUsWUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0tBQ2pELENBQUMsQ0FBQTtHQUNILENBQUMsQ0FBQTtDQUNILENBQUMsQ0FBQSIsImZpbGUiOiIvVXNlcnMvdGxhbmRhdS8uYXRvbS9wYWNrYWdlcy9saW50ZXIvc3BlYy9pbmRpZS1kZWxlZ2F0ZS1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0IEluZGllRGVsZWdhdGUgZnJvbSAnLi4vbGliL2luZGllLWRlbGVnYXRlJ1xuaW1wb3J0IHsgZ2V0TWVzc2FnZSwgZ2V0TWVzc2FnZUxlZ2FjeSB9IGZyb20gJy4vY29tbW9uJ1xuXG5kZXNjcmliZSgnSW5kaWVEZWxlZ2F0ZScsIGZ1bmN0aW9uKCkge1xuICBsZXQgaW5kaWVEZWxlZ2F0ZVxuICBsZXQgaW5kaWVEZWxlZ2F0ZUxlZ2FjeVxuXG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgaW5kaWVEZWxlZ2F0ZSA9IG5ldyBJbmRpZURlbGVnYXRlKHtcbiAgICAgIG5hbWU6ICdJbmRpZScsXG4gICAgfSwgMilcbiAgICBpbmRpZURlbGVnYXRlTGVnYWN5ID0gbmV3IEluZGllRGVsZWdhdGUoe1xuICAgICAgbmFtZTogJ0luZGllIExlZ2FjeScsXG4gICAgfSwgMSlcbiAgfSlcbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xuICAgIGluZGllRGVsZWdhdGUuZGlzcG9zZSgpXG4gICAgaW5kaWVEZWxlZ2F0ZUxlZ2FjeS5kaXNwb3NlKClcbiAgfSlcblxuICBpdCgnaGFzIHRoZSBiYXNpYyBsaW50ZXIgcHJvcGVydGllcycsIGZ1bmN0aW9uKCkge1xuICAgIGV4cGVjdCh0eXBlb2YgaW5kaWVEZWxlZ2F0ZS5uYW1lKS50b0JlKCdzdHJpbmcnKVxuICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLm5hbWUpLnRvQmUoJ0luZGllJylcbiAgICBleHBlY3QodHlwZW9mIGluZGllRGVsZWdhdGUuc2NvcGUpLnRvQmUoJ3N0cmluZycpXG4gICAgZXhwZWN0KGluZGllRGVsZWdhdGUuc2NvcGUpLnRvQmUoJ3Byb2plY3QnKVxuICB9KVxuICBkZXNjcmliZSgnOjpzZXRNZXNzYWdlcyAmJiA6OmdldE1lc3NhZ2VzICYmIDo6Y2xlYXJNZXNzYWdlcycsIGZ1bmN0aW9uKCkge1xuICAgIGl0KCd3b3JrcyBhcyBleHBlY3RlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGdldE1lc3NhZ2UoZmFsc2UpXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFtdKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhtZXNzYWdlLmxvY2F0aW9uLmZpbGUsIFttZXNzYWdlXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW21lc3NhZ2VdKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5jbGVhck1lc3NhZ2VzKClcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW10pXG4gICAgfSlcbiAgfSlcbiAgZGVzY3JpYmUoJzo6c2V0TWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnb3ZlcndyaXRlcyBwcmV2aW91cyBtZXNzYWdlcyBmb3IgdGhhdCBmaWxlJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBtZXNzYWdlQSA9IGdldE1lc3NhZ2UoZmFsc2UpXG4gICAgICBjb25zdCBtZXNzYWdlQiA9IGdldE1lc3NhZ2UoZmFsc2UpXG4gICAgICBjb25zdCBtZXNzYWdlQyA9IGdldE1lc3NhZ2UoZmFsc2UpXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFtdKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhtZXNzYWdlQS5sb2NhdGlvbi5maWxlLCBbbWVzc2FnZUEsIG1lc3NhZ2VCXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW21lc3NhZ2VBLCBtZXNzYWdlQl0pXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKG1lc3NhZ2VBLmxvY2F0aW9uLmZpbGUsIFttZXNzYWdlQSwgbWVzc2FnZUNdKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKSkudG9FcXVhbChbbWVzc2FnZUEsIG1lc3NhZ2VDXSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMobWVzc2FnZUEubG9jYXRpb24uZmlsZSwgW21lc3NhZ2VCLCBtZXNzYWdlQ10pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpKS50b0VxdWFsKFttZXNzYWdlQiwgbWVzc2FnZUNdKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhtZXNzYWdlQS5sb2NhdGlvbi5maWxlLCBbbWVzc2FnZUNdKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKSkudG9FcXVhbChbbWVzc2FnZUNdKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhtZXNzYWdlQS5sb2NhdGlvbi5maWxlLCBbXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLmdldE1lc3NhZ2VzKCkpLnRvRXF1YWwoW10pXG4gICAgfSlcbiAgICBpdCgnZG9lcyBub3QgdXBkYXRlIGlmIGlzIGRpc3Bvc2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgdGltZXNVcGRhdGVkID0gMFxuICAgICAgaW5kaWVEZWxlZ2F0ZS5vbkRpZFVwZGF0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZXNVcGRhdGVkKytcbiAgICAgIH0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDApXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuZGlzcG9zZSgpXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICB9KVxuICAgIGl0KCdkb2VzIHVwZGF0ZSBpZiBub3QgZGlzcG9zZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGxldCB0aW1lc1VwZGF0ZWQgPSAwXG4gICAgICBpbmRpZURlbGVnYXRlLm9uRGlkVXBkYXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lc1VwZGF0ZWQrK1xuICAgICAgfSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMClcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSldKVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgxKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDIpXG4gICAgfSlcbiAgICBpdCgnY3JpZXMgaWYgbWVzc2FnZSBoYXMgYSBkaWZmZXJlbnQgZmlsZVBhdGgnLCBmdW5jdGlvbigpIHtcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICB9KS5ub3QudG9UaHJvdygpXG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XG4gICAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSksIGdldE1lc3NhZ2UoX19maWxlbmFtZSksIGdldE1lc3NhZ2UoX19maWxlbmFtZSldKVxuICAgICAgfSkubm90LnRvVGhyb3coKVxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKGZhbHNlKV0pXG4gICAgICB9KS50b1Rocm93KCdtZXNzYWdlLmxvY2F0aW9uLmZpbGUgZG9lcyBub3QgbWF0Y2ggdGhlIGdpdmVuIGZpbGVQYXRoJylcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcbiAgICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKSwgZ2V0TWVzc2FnZShmYWxzZSldKVxuICAgICAgfSkudG9UaHJvdygnbWVzc2FnZS5sb2NhdGlvbi5maWxlIGRvZXMgbm90IG1hdGNoIHRoZSBnaXZlbiBmaWxlUGF0aCcpXG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XG4gICAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSksIGdldE1lc3NhZ2UoZmFsc2UpLCBnZXRNZXNzYWdlKF9fZmlsZW5hbWUpXSlcbiAgICAgIH0pLnRvVGhyb3coJ21lc3NhZ2UubG9jYXRpb24uZmlsZSBkb2VzIG5vdCBtYXRjaCB0aGUgZ2l2ZW4gZmlsZVBhdGgnKVxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpLCBnZXRNZXNzYWdlKF9fZmlsZW5hbWUpLCBnZXRNZXNzYWdlKGZhbHNlKV0pXG4gICAgICB9KS50b1Rocm93KCdtZXNzYWdlLmxvY2F0aW9uLmZpbGUgZG9lcyBub3QgbWF0Y2ggdGhlIGdpdmVuIGZpbGVQYXRoJylcbiAgICB9KVxuICAgIGl0KCdkb2VzIG5vdCBhZGQgaW52YWxpZCBtZXNzYWdlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgwKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbe31dKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgxKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcyhfX2ZpbGVuYW1lLCBbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpLmxlbmd0aCkudG9CZSgxKVxuICAgICAgZXhwZWN0KGF0b20ubm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKCkubGVuZ3RoKS50b0JlKDEpXG4gICAgfSlcbiAgfSlcbiAgZGVzY3JpYmUoJzo6Y2xlYXJNZXNzYWdlcycsIGZ1bmN0aW9uKCkge1xuICAgIGl0KCdkb2VzIG5vdCB1cGRhdGUgaWYgZGlzcG9zZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGxldCB0aW1lc1VwZGF0ZWQgPSAwXG4gICAgICBpbmRpZURlbGVnYXRlLm9uRGlkVXBkYXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lc1VwZGF0ZWQrK1xuICAgICAgfSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMClcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoX19maWxlbmFtZSwgW2dldE1lc3NhZ2UoX19maWxlbmFtZSldKVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgxKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5kaXNwb3NlKClcbiAgICAgIGluZGllRGVsZWdhdGUuY2xlYXJNZXNzYWdlcygpXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDEpXG4gICAgfSlcbiAgICBpdCgnZG9lcyB1cGRhdGUgaWYgbm90IGRpc3Bvc2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgdGltZXNVcGRhdGVkID0gMFxuICAgICAgaW5kaWVEZWxlZ2F0ZS5vbkRpZFVwZGF0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZXNVcGRhdGVkKytcbiAgICAgIH0pXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDApXG4gICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKF9fZmlsZW5hbWUsIFtnZXRNZXNzYWdlKF9fZmlsZW5hbWUpXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuY2xlYXJNZXNzYWdlcygpXG4gICAgICBleHBlY3QodGltZXNVcGRhdGVkKS50b0JlKDIpXG4gICAgfSlcbiAgfSlcbiAgZGVzY3JpYmUoJzo6c2V0QWxsTWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICBpdCgnYXV0b21hdGljYWxseSBzcGxpdHMgbWVzc2FnZXMgaW50byBmaWxlUGF0aCBncm91cHMnLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VBID0gZ2V0TWVzc2FnZShmYWxzZSlcbiAgICAgIGNvbnN0IG1lc3NhZ2VCID0gZ2V0TWVzc2FnZShmYWxzZSlcbiAgICAgIGNvbnN0IG1lc3NhZ2VDID0gZ2V0TWVzc2FnZShmYWxzZSlcbiAgICAgIGNvbnN0IG1lc3NhZ2VEID0gZ2V0TWVzc2FnZShmYWxzZSlcblxuICAgICAgbWVzc2FnZUMubG9jYXRpb24uZmlsZSA9IF9fZmlsZW5hbWVcbiAgICAgIG1lc3NhZ2VELmxvY2F0aW9uLmZpbGUgPSBfX2ZpbGVuYW1lXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5tZXNzYWdlcy5zaXplKS50b0JlKDApXG4gICAgICBpbmRpZURlbGVnYXRlLnNldEFsbE1lc3NhZ2VzKFttZXNzYWdlQSwgbWVzc2FnZUIsIG1lc3NhZ2VDLCBtZXNzYWdlRF0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5tZXNzYWdlcy5zaXplKS50b0JlKDIpXG5cbiAgICAgIGNvbnN0IG1lc3NhZ2VzQSA9IGluZGllRGVsZWdhdGUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VBLmxvY2F0aW9uLmZpbGUpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShtZXNzYWdlc0EpKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QobWVzc2FnZXNBKS50b0VxdWFsKFttZXNzYWdlQSwgbWVzc2FnZUJdKVxuXG4gICAgICBjb25zdCBtZXNzYWdlc0IgPSBpbmRpZURlbGVnYXRlLm1lc3NhZ2VzLmdldChtZXNzYWdlQy5sb2NhdGlvbi5maWxlKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobWVzc2FnZXNCKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KG1lc3NhZ2VzQikudG9FcXVhbChbbWVzc2FnZUMsIG1lc3NhZ2VEXSlcbiAgICB9KVxuICAgIGl0KCdkb2VzIG5vdCB1cGRhdGUgaWYgZGlzcG9zZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGxldCB0aW1lc1VwZGF0ZWQgPSAwXG4gICAgICBpbmRpZURlbGVnYXRlLm9uRGlkVXBkYXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lc1VwZGF0ZWQrK1xuICAgICAgfSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMClcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0QWxsTWVzc2FnZXMoW2dldE1lc3NhZ2UoZmFsc2UpXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuZGlzcG9zZSgpXG4gICAgICBpbmRpZURlbGVnYXRlLnNldEFsbE1lc3NhZ2VzKFtdKVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgxKVxuICAgIH0pXG4gICAgaXQoJ2RvZXMgdXBkYXRlIGlmIG5vdCBkaXNwb3NlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHRpbWVzVXBkYXRlZCA9IDBcbiAgICAgIGluZGllRGVsZWdhdGUub25EaWRVcGRhdGUoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVzVXBkYXRlZCsrXG4gICAgICB9KVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgwKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRBbGxNZXNzYWdlcyhbZ2V0TWVzc2FnZShmYWxzZSldKVxuICAgICAgZXhwZWN0KHRpbWVzVXBkYXRlZCkudG9CZSgxKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRBbGxNZXNzYWdlcyhbXSlcbiAgICAgIGV4cGVjdCh0aW1lc1VwZGF0ZWQpLnRvQmUoMilcbiAgICB9KVxuICAgIGl0KCdkb2VzIG5vdCBhZGQgaW52YWxpZCBtZXNzYWdlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgwKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRBbGxNZXNzYWdlcyhbe31dKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGUuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgxKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRBbGxNZXNzYWdlcyhbZ2V0TWVzc2FnZShfX2ZpbGVuYW1lKV0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5nZXRNZXNzYWdlcygpLmxlbmd0aCkudG9CZSgxKVxuICAgICAgZXhwZWN0KGF0b20ubm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKCkubGVuZ3RoKS50b0JlKDEpXG4gICAgfSlcbiAgfSlcbiAgZGVzY3JpYmUoJzo6ZGlzcG9zZScsIGZ1bmN0aW9uKCkge1xuICAgIGl0KCdjbGVhcnMgbWVzc2FnZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0QWxsTWVzc2FnZXMoW2dldE1lc3NhZ2UoZmFsc2UpXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlLm1lc3NhZ2VzLnNpemUpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGUuZGlzcG9zZSgpXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZS5tZXNzYWdlcy5zaXplKS50b0JlKDApXG4gICAgfSlcbiAgICBpdCgnZW1pdHMgZGlkLWRlc3Ryb3kgZXZlbnQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGxldCBkaWREZXN0cm95ID0gZmFsc2VcbiAgICAgIGluZGllRGVsZWdhdGUub25EaWREZXN0cm95KGZ1bmN0aW9uKCkge1xuICAgICAgICBkaWREZXN0cm95ID0gdHJ1ZVxuICAgICAgfSlcbiAgICAgIGV4cGVjdChkaWREZXN0cm95KS50b0JlKGZhbHNlKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5kaXNwb3NlKClcbiAgICAgIGV4cGVjdChkaWREZXN0cm95KS50b0JlKHRydWUpXG4gICAgfSlcbiAgfSlcbiAgZGVzY3JpYmUoJ0xlZ2FjeSBmZWF0dXJlcycsIGZ1bmN0aW9uKCkge1xuICAgIGl0KCdoYXMgYSBkZWxldGVNZXNzYWdlcygpIGhhcyB0aHJvd3Mgb24gbmV3ZXIgdmVyc2lvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmRpZURlbGVnYXRlLmRlbGV0ZU1lc3NhZ2VzKClcbiAgICAgIH0pLnRvVGhyb3coJ0NhbGwgdG8gZGVwcmVjaWF0ZWQgbWV0aG9kIGRlbGV0ZU1lc3NhZ2VzKCkuIFVzZSBjbGVhck1lc3NhZ2VzKCkgaW5zZWFkJylcbiAgICB9KVxuICAgIGl0KCdoYXMgYSBzZXRNZXNzYWdlcygpIHRoYXQgdGhyb3dzIHdoZW4gY2FsbGVkIHdpdGggb2xkIHNpZ25hdHVyZScsIGZ1bmN0aW9uKCkge1xuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpbmRpZURlbGVnYXRlLnNldE1lc3NhZ2VzKFtdKVxuICAgICAgfSkudG9UaHJvdygnSW52YWxpZCBQYXJhbWV0ZXJzIHRvIHNldE1lc3NhZ2VzKCknKVxuICAgIH0pXG4gICAgaXQoJ3NldHMgYW5kIGNsZWFycyBtZXNzYWdlcyBwcm9wZXJseSBvbiBsZWdhY3kgdmVyc2lvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgaW5kaWVEZWxlZ2F0ZUxlZ2FjeS5zZXRNZXNzYWdlcyhbZ2V0TWVzc2FnZUxlZ2FjeShmYWxzZSldKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGVMZWdhY3kuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMSlcbiAgICAgIGluZGllRGVsZWdhdGVMZWdhY3kuZGVsZXRlTWVzc2FnZXMoKVxuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGVMZWdhY3kuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICB9KVxuICAgIGl0KCdkb2VzIG5vdCBhZGQgaW52YWxpZCBtZXNzYWdlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgZXhwZWN0KGluZGllRGVsZWdhdGVMZWdhY3kuZ2V0TWVzc2FnZXMoKS5sZW5ndGgpLnRvQmUoMClcbiAgICAgIGV4cGVjdChhdG9tLm5vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucygpLmxlbmd0aCkudG9CZSgwKVxuXG4gICAgICBpbmRpZURlbGVnYXRlTGVnYWN5LnNldE1lc3NhZ2VzKFt7fV0pXG4gICAgICBleHBlY3QoaW5kaWVEZWxlZ2F0ZUxlZ2FjeS5nZXRNZXNzYWdlcygpLmxlbmd0aCkudG9CZSgwKVxuICAgICAgZXhwZWN0KGF0b20ubm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKCkubGVuZ3RoKS50b0JlKDEpXG5cbiAgICAgIGluZGllRGVsZWdhdGVMZWdhY3kuc2V0TWVzc2FnZXMoW2dldE1lc3NhZ2VMZWdhY3koZmFsc2UpXSlcbiAgICAgIGV4cGVjdChpbmRpZURlbGVnYXRlTGVnYWN5LmdldE1lc3NhZ2VzKCkubGVuZ3RoKS50b0JlKDEpXG4gICAgICBleHBlY3QoYXRvbS5ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMoKS5sZW5ndGgpLnRvQmUoMSlcbiAgICB9KVxuICB9KVxuICBkZXNjcmliZSgnOjpvbkRpZFVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgIGl0KCdpbmNsdWRlcyBhbGwgb2YgdGhlIG1lc3NhZ2VzJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBtZXNzYWdlc0EgPSBbZ2V0TWVzc2FnZSgnYScpLCBnZXRNZXNzYWdlKCdhJyksIGdldE1lc3NhZ2UoJ2EnKSwgZ2V0TWVzc2FnZSgnYScpLCBnZXRNZXNzYWdlKCdhJyldXG4gICAgICBjb25zdCBtZXNzYWdlc0IgPSBbZ2V0TWVzc2FnZSgnYicpLCBnZXRNZXNzYWdlKCdiJyksIGdldE1lc3NhZ2UoJ2InKSwgZ2V0TWVzc2FnZSgnYicpLCBnZXRNZXNzYWdlKCdiJyldXG4gICAgICBjb25zdCBzcHlDYWxsYmFjayA9IGphc21pbmUuY3JlYXRlU3B5KCdvbkRpZFVwZGF0ZScpXG4gICAgICBpbmRpZURlbGVnYXRlLm9uRGlkVXBkYXRlKHNweUNhbGxiYWNrKVxuICAgICAgaW5kaWVEZWxlZ2F0ZS5zZXRNZXNzYWdlcygnYScsIG1lc3NhZ2VzQSlcbiAgICAgIGluZGllRGVsZWdhdGUuc2V0TWVzc2FnZXMoJ2InLCBtZXNzYWdlc0IpXG4gICAgICBpbmRpZURlbGVnYXRlLmNsZWFyTWVzc2FnZXMoKVxuICAgICAgZXhwZWN0KHNweUNhbGxiYWNrLmNhbGxzLmxlbmd0aCkudG9CZSgzKVxuICAgICAgZXhwZWN0KHNweUNhbGxiYWNrLmNhbGxzWzBdLmFyZ3NbMF0pLnRvRXF1YWwobWVzc2FnZXNBKVxuICAgICAgZXhwZWN0KHNweUNhbGxiYWNrLmNhbGxzWzFdLmFyZ3NbMF0pLnRvRXF1YWwobWVzc2FnZXNBLmNvbmNhdChtZXNzYWdlc0IpKVxuICAgICAgZXhwZWN0KHNweUNhbGxiYWNrLmNhbGxzWzJdLmFyZ3NbMF0pLnRvRXF1YWwoW10pXG4gICAgfSlcbiAgfSlcbn0pXG4iXX0=