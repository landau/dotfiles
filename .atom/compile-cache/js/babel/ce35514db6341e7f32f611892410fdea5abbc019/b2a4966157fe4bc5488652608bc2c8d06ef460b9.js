var _helpers = require('./helpers');

var _treeViewSettings = require('./tree-view-settings');

'use babel';
'use strict';

function init() {
    (0, _helpers.toggleClass)(atom.config.get('atom-material-ui.tabs.tintedTabBar'), 'tinted-tab-bar');
    (0, _helpers.toggleClass)(atom.config.get('atom-material-ui.tabs.compactTabs'), 'compact-tab-bar');
    (0, _helpers.toggleClass)(atom.config.get('atom-material-ui.ui.panelShadows'), 'panel-shadows');
    (0, _helpers.toggleClass)(atom.config.get('atom-material-ui.ui.panelContrast'), 'panel-contrast');
    (0, _helpers.toggleClass)(atom.config.get('atom-material-ui.ui.animations'), 'use-animations');
    (0, _helpers.toggleClass)(atom.config.get('atom-material-ui.treeView.compactList'), 'compact-tree-view');
    (0, _helpers.toggleClass)(atom.config.get('atom-material-ui.treeView.blendTabs'), 'blend-tree-view');
    (0, _treeViewSettings.toggleBlendTreeView)(atom.config.get('atom-material-ui.treeView.blendTabs'));

    document.querySelector(':root').style.fontSize = atom.config.get('atom-material-ui.fonts.fontSize') + 'px';
}

// Check if there are custom icons packages
function checkPacks() {
    var root = document.querySelector('atom-workspace');
    var loadedPackages = atom.packages.getActivePackages();
    var iconPacks = ['file-icons', 'file-type-icons', 'seti-icons', 'envygeeks-file-icons'];

    root.classList.remove('has-custom-icons');

    loadedPackages.forEach(function (pack) {
        if (iconPacks.indexOf(pack.name) >= 0) {
            root.classList.add('has-custom-icons');
        }
    });
}

function apply() {
    atom.packages.onDidActivatePackage(function () {
        return checkPacks();
    });
    atom.packages.onDidDeactivatePackage(function () {
        return checkPacks();
    });

    init();

    // Font Size Settings

    atom.config.onDidChange('atom-material-ui.fonts.fontSize', function (value) {
        var fontSize = Math.round(value.newValue);
        document.querySelector(':root').style.fontSize = fontSize + 'px';
    });

    // Tab blending

    atom.config.onDidChange('atom-material-ui.treeView.blendTabs', function (value) {
        return (0, _treeViewSettings.toggleBlendTreeView)(value.newValue);
    });

    // className-toggling Settings

    atom.config.onDidChange('atom-material-ui.tabs.tintedTabBar', function (value) {
        return (0, _helpers.toggleClass)(value.newValue, 'tinted-tab-bar');
    });
    atom.config.onDidChange('atom-material-ui.tabs.compactTabs', function (value) {
        return (0, _helpers.toggleClass)(value.newValue, 'compact-tab-bar');
    });
    atom.config.onDidChange('atom-material-ui.ui.animations', function (value) {
        return (0, _helpers.toggleClass)(value.newValue, 'use-animations');
    });
    atom.config.onDidChange('atom-material-ui.ui.panelShadows', function (value) {
        return (0, _helpers.toggleClass)(value.newValue, 'panel-shadows');
    });
    atom.config.onDidChange('atom-material-ui.ui.panelContrast', function (value) {
        return (0, _helpers.toggleClass)(value.newValue, 'panel-contrast');
    });
    atom.config.onDidChange('atom-material-ui.treeView.compactList', function (value) {
        return (0, _helpers.toggleClass)(value.newValue, 'compact-tree-view');
    });
    atom.config.onDidChange('atom-material-ui.treeView.blendTabs', function (value) {
        if (value.newValue && !atom.config.get('atom-material-ui.tabs.tintedTabBar')) {
            atom.config.set('atom-material-ui.tabs.tintedTabBar', true);
        }

        (0, _helpers.toggleClass)(value.newValue, 'blend-tree-view');
    });
}

module.exports = { apply: apply };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90bGFuZGF1L2RvdGZpbGVzLy5hdG9tL3BhY2thZ2VzL2F0b20tbWF0ZXJpYWwtdWkvbGliL3NldHRpbmdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJ1QkFHNEIsV0FBVzs7Z0NBQ0gsc0JBQXNCOztBQUoxRCxXQUFXLENBQUM7QUFDWixZQUFZLENBQUM7O0FBS2IsU0FBUyxJQUFJLEdBQUc7QUFDWiw4QkFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsQ0FBQyxFQUFFLGdCQUFnQixDQUFDLENBQUM7QUFDckYsOEJBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3JGLDhCQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDbEYsOEJBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3BGLDhCQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGdDQUFnQyxDQUFDLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztBQUNqRiw4QkFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyx1Q0FBdUMsQ0FBQyxFQUFFLG1CQUFtQixDQUFDLENBQUM7QUFDM0YsOEJBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMscUNBQXFDLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3ZGLCtDQUFvQixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDLENBQUM7O0FBRTVFLFlBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBTSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxP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LENBQUMsb0NBQW9DLENBQUMsRUFBRTtBQUMxRSxnQkFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDL0Q7O0FBRUQsa0NBQVksS0FBSyxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0tBQ2xELENBQUMsQ0FBQztDQUNOOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsRUFBRSxLQUFLLEVBQUwsS0FBSyxFQUFFLENBQUMiLCJmaWxlIjoiL1VzZXJzL3RsYW5kYXUvZG90ZmlsZXMvLmF0b20vcGFja2FnZXMvYXRvbS1tYXRlcmlhbC11aS9saWIvc2V0dGluZ3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgdG9nZ2xlQ2xhc3MgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgdG9nZ2xlQmxlbmRUcmVlVmlldyB9IGZyb20gJy4vdHJlZS12aWV3LXNldHRpbmdzJztcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0b2dnbGVDbGFzcyhhdG9tLmNvbmZpZy5nZXQoJ2F0b20tbWF0ZXJpYWwtdWkudGFicy50aW50ZWRUYWJCYXInKSwgJ3RpbnRlZC10YWItYmFyJyk7XG4gICAgdG9nZ2xlQ2xhc3MoYXRvbS5jb25maWcuZ2V0KCdhdG9tLW1hdGVyaWFsLXVpLnRhYnMuY29tcGFjdFRhYnMnKSwgJ2NvbXBhY3QtdGFiLWJhcicpO1xuICAgIHRvZ2dsZUNsYXNzKGF0b20uY29uZmlnLmdldCgnYXRvbS1tYXRlcmlhbC11aS51aS5wYW5lbFNoYWRvd3MnKSwgJ3BhbmVsLXNoYWRvd3MnKTtcbiAgICB0b2dnbGVDbGFzcyhhdG9tLmNvbmZpZy5nZXQoJ2F0b20tbWF0ZXJpYWwtdWkudWkucGFuZWxDb250cmFzdCcpLCAncGFuZWwtY29udHJhc3QnKTtcbiAgICB0b2dnbGVDbGFzcyhhdG9tLmNvbmZpZy5nZXQoJ2F0b20tbWF0ZXJpYWwtdWkudWkuYW5pbWF0aW9ucycpLCAndXNlLWFuaW1hdGlvbnMnKTtcbiAgICB0b2dnbGVDbGFzcyhhdG9tLmNvbmZpZy5nZXQoJ2F0b20tbWF0ZXJpYWwtdWkudHJlZVZpZXcuY29tcGFjdExpc3QnKSwgJ2NvbXBhY3QtdHJlZS12aWV3Jyk7XG4gICAgdG9nZ2xlQ2xhc3MoYXRvbS5jb25maWcuZ2V0KCdhdG9tLW1hdGVyaWFsLXVpLnRyZWVWaWV3LmJsZW5kVGFicycpLCAnYmxlbmQtdHJlZS12aWV3Jyk7XG4gICAgdG9nZ2xlQmxlbmRUcmVlVmlldyhhdG9tLmNvbmZpZy5nZXQoJ2F0b20tbWF0ZXJpYWwtdWkudHJlZVZpZXcuYmxlbmRUYWJzJykpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignOnJvb3QnKS5zdHlsZS5mb250U2l6ZSA9IGAke2F0b20uY29uZmlnLmdldCgnYXRvbS1tYXRlcmlhbC11aS5mb250cy5mb250U2l6ZScpfXB4YDtcbn1cblxuLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGN1c3RvbSBpY29ucyBwYWNrYWdlc1xuZnVuY3Rpb24gY2hlY2tQYWNrcygpIHtcbiAgICB2YXIgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2F0b20td29ya3NwYWNlJyk7XG4gICAgdmFyIGxvYWRlZFBhY2thZ2VzID0gYXRvbS5wYWNrYWdlcy5nZXRBY3RpdmVQYWNrYWdlcygpO1xuICAgIHZhciBpY29uUGFja3MgPSBbJ2ZpbGUtaWNvbnMnLCAnZmlsZS10eXBlLWljb25zJywgJ3NldGktaWNvbnMnLCAnZW52eWdlZWtzLWZpbGUtaWNvbnMnXTtcblxuICAgIHJvb3QuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWN1c3RvbS1pY29ucycpO1xuXG4gICAgbG9hZGVkUGFja2FnZXMuZm9yRWFjaCgocGFjaykgPT4ge1xuICAgICAgICBpZiAoaWNvblBhY2tzLmluZGV4T2YocGFjay5uYW1lKSA+PSAwKSB7XG4gICAgICAgICAgICByb290LmNsYXNzTGlzdC5hZGQoJ2hhcy1jdXN0b20taWNvbnMnKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhcHBseSgpIHtcbiAgICBhdG9tLnBhY2thZ2VzLm9uRGlkQWN0aXZhdGVQYWNrYWdlKCgpID0+IGNoZWNrUGFja3MoKSk7XG4gICAgYXRvbS5wYWNrYWdlcy5vbkRpZERlYWN0aXZhdGVQYWNrYWdlKCgpID0+IGNoZWNrUGFja3MoKSk7XG5cbiAgICBpbml0KCk7XG5cbiAgICAvLyBGb250IFNpemUgU2V0dGluZ3NcblxuICAgIGF0b20uY29uZmlnLm9uRGlkQ2hhbmdlKCdhdG9tLW1hdGVyaWFsLXVpLmZvbnRzLmZvbnRTaXplJywgKHZhbHVlKSA9PiB7XG4gICAgICAgIHZhciBmb250U2l6ZSA9IE1hdGgucm91bmQodmFsdWUubmV3VmFsdWUpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCc6cm9vdCcpLnN0eWxlLmZvbnRTaXplID0gYCR7Zm9udFNpemV9cHhgO1xuICAgIH0pO1xuXG4gICAgLy8gVGFiIGJsZW5kaW5nXG5cbiAgICBhdG9tLmNvbmZpZy5vbkRpZENoYW5nZSgnYXRvbS1tYXRlcmlhbC11aS50cmVlVmlldy5ibGVuZFRhYnMnLCAodmFsdWUpID0+IHRvZ2dsZUJsZW5kVHJlZVZpZXcodmFsdWUubmV3VmFsdWUpKTtcblxuICAgIC8vIGNsYXNzTmFtZS10b2dnbGluZyBTZXR0aW5nc1xuXG4gICAgYXRvbS5jb25maWcub25EaWRDaGFuZ2UoJ2F0b20tbWF0ZXJpYWwtdWkudGFicy50aW50ZWRUYWJCYXInLCAodmFsdWUpID0+IHRvZ2dsZUNsYXNzKHZhbHVlLm5ld1ZhbHVlLCAndGludGVkLXRhYi1iYXInKSk7XG4gICAgYXRvbS5jb25maWcub25EaWRDaGFuZ2UoJ2F0b20tbWF0ZXJpYWwtdWkudGFicy5jb21wYWN0VGFicycsICh2YWx1ZSkgPT4gdG9nZ2xlQ2xhc3ModmFsdWUubmV3VmFsdWUsICdjb21wYWN0LXRhYi1iYXInKSk7XG4gICAgYXRvbS5jb25maWcub25EaWRDaGFuZ2UoJ2F0b20tbWF0ZXJpYWwtdWkudWkuYW5pbWF0aW9ucycsICh2YWx1ZSkgPT4gdG9nZ2xlQ2xhc3ModmFsdWUubmV3VmFsdWUsICd1c2UtYW5pbWF0aW9ucycpKTtcbiAgICBhdG9tLmNvbmZpZy5vbkRpZENoYW5nZSgnYXRvbS1tYXRlcmlhbC11aS51aS5wYW5lbFNoYWRvd3MnLCAodmFsdWUpID0+IHRvZ2dsZUNsYXNzKHZhbHVlLm5ld1ZhbHVlLCAncGFuZWwtc2hhZG93cycpKTtcbiAgICBhdG9tLmNvbmZpZy5vbkRpZENoYW5nZSgnYXRvbS1tYXRlcmlhbC11aS51aS5wYW5lbENvbnRyYXN0JywgKHZhbHVlKSA9PiB0b2dnbGVDbGFzcyh2YWx1ZS5uZXdWYWx1ZSwgJ3BhbmVsLWNvbnRyYXN0JykpO1xuICAgIGF0b20uY29uZmlnLm9uRGlkQ2hhbmdlKCdhdG9tLW1hdGVyaWFsLXVpLnRyZWVWaWV3LmNvbXBhY3RMaXN0JywgKHZhbHVlKSA9PiB0b2dnbGVDbGFzcyh2YWx1ZS5uZXdWYWx1ZSwgJ2NvbXBhY3QtdHJlZS12aWV3JykpO1xuICAgIGF0b20uY29uZmlnLm9uRGlkQ2hhbmdlKCdhdG9tLW1hdGVyaWFsLXVpLnRyZWVWaWV3LmJsZW5kVGFicycsICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodmFsdWUubmV3VmFsdWUgJiYgIWF0b20uY29uZmlnLmdldCgnYXRvbS1tYXRlcmlhbC11aS50YWJzLnRpbnRlZFRhYkJhcicpKSB7XG4gICAgICAgICAgICBhdG9tLmNvbmZpZy5zZXQoJ2F0b20tbWF0ZXJpYWwtdWkudGFicy50aW50ZWRUYWJCYXInLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZUNsYXNzKHZhbHVlLm5ld1ZhbHVlLCAnYmxlbmQtdHJlZS12aWV3Jyk7XG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBhcHBseSB9O1xuIl19
//# sourceURL=/Users/tlandau/dotfiles/.atom/packages/atom-material-ui/lib/settings.js
