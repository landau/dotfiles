'use babel';

MockDate = require('mockdate');

getTooltips = function (workspaceElement) {
  element = workspaceElement.querySelector('.atom-clock');
  return atom.tooltips.findTooltips(element);
};

getTooltipDate = function (workspaceElement) {
  tooltip = getTooltips(workspaceElement)[0];
  return tooltip.getTitle();
};

describe('Atom Clock', function () {

  var workspaceElement = undefined;

  beforeEach(function () {
    workspaceElement = atom.views.getView(atom.workspace);
    jasmine.attachToDOM(workspaceElement);
    MockDate.set('1987-04-11 04:00');

    var statusBar = undefined;
    var AtomClock = undefined;

    waitsForPromise(function () {
      return atom.packages.activatePackage('status-bar').then(function (pack) {
        statusBar = workspaceElement.querySelector('status-bar');
      });
    });

    waitsForPromise(function () {
      return atom.packages.activatePackage('atom-clock').then(function (clk) {
        AtomClock = clk.mainModule;
        AtomClock.consumeStatusBar(statusBar);
      });
    });

    waitsForPromise(function () {
      return atom.workspace.open();
    });
  });

  afterEach(function () {
    MockDate.reset();
  });

  it('should not show the tooltip by default', function () {
    expect(getTooltips(workspaceElement)[0].enabled).toBe(false);
  });

  it('should show the tooltip when configured', function () {
    atom.config.set('atom-clock.showTooltip', true);
    expect(getTooltips(workspaceElement)[0].enabled).toBe(true);
  });

  it('should not show the clock icon by default', function () {
    icon = workspaceElement.querySelector('.atom-clock > .icon-clock');
    expect(icon).toBeNull();
  });

  it('should show the clock icon when configured', function () {
    atom.config.set('atom-clock.showClockIcon', true);
    icon = workspaceElement.querySelector('.atom-clock > .icon-clock');
    expect(icon).not.toBeNull();
  });

  it('should show the time with the default format', function () {
    date = workspaceElement.querySelector('.atom-clock > span').innerText;
    expect(date).toBe('4:00');
  });

  it('should show the time in the tooltip with the default format', function () {
    date = getTooltipDate(workspaceElement);
    expect(date.toLowerCase()).toBe('saturday, april 11, 1987 4:00 am');
  });

  it('should change the format of displayed time', function () {
    atom.config.set('atom-clock.dateFormat', 'H:mm:ss');
    date = workspaceElement.querySelector('.atom-clock > span').innerText;
    expect(date).toBe('4:00:00');

    atom.config.set('atom-clock.dateFormat', 'DD dddd YY H:mm');
    date = workspaceElement.querySelector('.atom-clock > span').innerText;
    expect(date.toLowerCase()).toBe('11 saturday 87 4:00');
  });

  it('should change the format of the displayed time in the tooltip', function () {
    atom.config.set('atom-clock.tooltipDateFormat', 'H:mm:ss');
    date = getTooltipDate(workspaceElement);
    expect(date).toBe('4:00:00');

    atom.config.set('atom-clock.tooltipDateFormat', 'DD dddd YY H:mm');
    date = getTooltipDate(workspaceElement);
    expect(date.toLowerCase()).toBe('11 saturday 87 4:00');
  });

  it('should change the clock content according with the locale', function () {
    atom.config.set('atom-clock.dateFormat', 'DD dddd YY H:mm');
    atom.config.set('atom-clock.locale', 'it');
    date = workspaceElement.querySelector('.atom-clock > span').innerText;
    expect(date.toLowerCase()).toBe('11 sabato 87 4:00');
  });

  it('should change the clock content in the tooltip according with the locale', function () {
    atom.config.set('atom-clock.tooltipDateFormat', 'DD dddd YY H:mm');
    atom.config.set('atom-clock.locale', 'it');
    date = getTooltipDate(workspaceElement);
    expect(date.toLowerCase()).toBe('11 sabato 87 4:00');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90bGFuZGF1Ly5hdG9tL3BhY2thZ2VzL2F0b20tY2xvY2svc3BlYy9hdG9tLWNsb2NrLXZpZXctc3BlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLENBQUM7O0FBRVosUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQTs7QUFFOUIsV0FBVyxHQUFHLFVBQVMsZ0JBQWdCLEVBQUU7QUFDdkMsU0FBTyxHQUFHLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQTtBQUN2RCxTQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0NBQzNDLENBQUE7O0FBRUQsY0FBYyxHQUFHLFVBQVMsZ0JBQWdCLEVBQUU7QUFDMUMsU0FBTyxHQUFHLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFDLFNBQU8sT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFBO0NBQzFCLENBQUE7O0FBRUQsUUFBUSxDQUFDLFlBQVksRUFBRSxZQUFNOztBQUUzQixNQUFJLGdCQUFnQixZQUFBLENBQUE7O0FBRXBCLFlBQVUsQ0FBQyxZQUFNO0FBQ2Ysb0JBQWdCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0FBQ3JELFdBQU8sQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtBQUNyQyxZQUFRLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQUE7O0FBRWhDLFFBQUksU0FBUyxZQUFBLENBQUE7QUFDYixRQUFJLFNBQVMsWUFBQSxDQUFBOztBQUViLG1CQUFlLENBQUM7YUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxJQUFJLEVBQUs7QUFDL0UsaUJBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFD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Q0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFBO0FBQzFDLFFBQUksR0FBRyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtBQUN2QyxVQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUE7R0FDckQsQ0FBQyxDQUFBO0NBRUgsQ0FBQyxDQUFBIiwiZmlsZSI6Ii9Vc2Vycy90bGFuZGF1Ly5hdG9tL3BhY2thZ2VzL2F0b20tY2xvY2svc3BlYy9hdG9tLWNsb2NrLXZpZXctc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuXG5Nb2NrRGF0ZSA9IHJlcXVpcmUoJ21vY2tkYXRlJylcblxuZ2V0VG9vbHRpcHMgPSBmdW5jdGlvbih3b3Jrc3BhY2VFbGVtZW50KSB7XG4gIGVsZW1lbnQgPSB3b3Jrc3BhY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdG9tLWNsb2NrJylcbiAgcmV0dXJuIGF0b20udG9vbHRpcHMuZmluZFRvb2x0aXBzKGVsZW1lbnQpXG59XG5cbmdldFRvb2x0aXBEYXRlID0gZnVuY3Rpb24od29ya3NwYWNlRWxlbWVudCkge1xuICB0b29sdGlwID0gZ2V0VG9vbHRpcHMod29ya3NwYWNlRWxlbWVudClbMF1cbiAgcmV0dXJuIHRvb2x0aXAuZ2V0VGl0bGUoKVxufVxuXG5kZXNjcmliZSgnQXRvbSBDbG9jaycsICgpID0+IHtcblxuICBsZXQgd29ya3NwYWNlRWxlbWVudFxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHdvcmtzcGFjZUVsZW1lbnQgPSBhdG9tLnZpZXdzLmdldFZpZXcoYXRvbS53b3Jrc3BhY2UpXG4gICAgamFzbWluZS5hdHRhY2hUb0RPTSh3b3Jrc3BhY2VFbGVtZW50KVxuICAgIE1vY2tEYXRlLnNldCgnMTk4Ny0wNC0xMSAwNDowMCcpXG5cbiAgICBsZXQgc3RhdHVzQmFyXG4gICAgbGV0IEF0b21DbG9ja1xuXG4gICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKCdzdGF0dXMtYmFyJykudGhlbigocGFjaykgPT4ge1xuICAgICAgc3RhdHVzQmFyID0gd29ya3NwYWNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdzdGF0dXMtYmFyJylcbiAgICB9KSlcblxuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSgnYXRvbS1jbG9jaycpLnRoZW4oKGNsaykgPT4ge1xuICAgICAgQXRvbUNsb2NrID0gY2xrLm1haW5Nb2R1bGVcbiAgICAgIEF0b21DbG9jay5jb25zdW1lU3RhdHVzQmFyKHN0YXR1c0JhcilcbiAgICB9KSlcblxuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiBhdG9tLndvcmtzcGFjZS5vcGVuKCkpXG4gIH0pXG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBNb2NrRGF0ZS5yZXNldCgpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBub3Qgc2hvdyB0aGUgdG9vbHRpcCBieSBkZWZhdWx0JywgKCkgPT4ge1xuICAgIGV4cGVjdChnZXRUb29sdGlwcyh3b3Jrc3BhY2VFbGVtZW50KVswXS5lbmFibGVkKS50b0JlKGZhbHNlKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgc2hvdyB0aGUgdG9vbHRpcCB3aGVuIGNvbmZpZ3VyZWQnLCAoKSA9PiB7XG4gICAgYXRvbS5jb25maWcuc2V0KCdhdG9tLWNsb2NrLnNob3dUb29sdGlwJywgdHJ1ZSlcbiAgICBleHBlY3QoZ2V0VG9vbHRpcHMod29ya3NwYWNlRWxlbWVudClbMF0uZW5hYmxlZCkudG9CZSh0cnVlKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgbm90IHNob3cgdGhlIGNsb2NrIGljb24gYnkgZGVmYXVsdCcsICgpID0+IHtcbiAgICBpY29uID0gd29ya3NwYWNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYXRvbS1jbG9jayA+IC5pY29uLWNsb2NrJylcbiAgICBleHBlY3QoaWNvbikudG9CZU51bGwoKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgc2hvdyB0aGUgY2xvY2sgaWNvbiB3aGVuIGNvbmZpZ3VyZWQnLCAoKSA9PiB7XG4gICAgYXRvbS5jb25maWcuc2V0KCdhdG9tLWNsb2NrLnNob3dDbG9ja0ljb24nLCB0cnVlKVxuICAgIGljb24gPSB3b3Jrc3BhY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdG9tLWNsb2NrID4gLmljb24tY2xvY2snKVxuICAgIGV4cGVjdChpY29uKS5ub3QudG9CZU51bGwoKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgc2hvdyB0aGUgdGltZSB3aXRoIHRoZSBkZWZhdWx0IGZvcm1hdCcsICgpID0+IHtcbiAgICBkYXRlID0gd29ya3NwYWNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYXRvbS1jbG9jayA+IHNwYW4nKS5pbm5lclRleHRcbiAgICBleHBlY3QoZGF0ZSkudG9CZSgnNDowMCcpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBzaG93IHRoZSB0aW1lIGluIHRoZSB0b29sdGlwIHdpdGggdGhlIGRlZmF1bHQgZm9ybWF0JywgKCkgPT4ge1xuICAgIGRhdGUgPSBnZXRUb29sdGlwRGF0ZSh3b3Jrc3BhY2VFbGVtZW50KVxuICAgIGV4cGVjdChkYXRlLnRvTG93ZXJDYXNlKCkpLnRvQmUoJ3NhdHVyZGF5LCBhcHJpbCAxMSwgMTk4NyA0OjAwIGFtJylcbiAgfSlcblxuICBpdCgnc2hvdWxkIGNoYW5nZSB0aGUgZm9ybWF0IG9mIGRpc3BsYXllZCB0aW1lJywgKCkgPT4ge1xuICAgIGF0b20uY29uZmlnLnNldCgnYXRvbS1jbG9jay5kYXRlRm9ybWF0JywgJ0g6bW06c3MnKVxuICAgIGRhdGUgPSB3b3Jrc3BhY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdG9tLWNsb2NrID4gc3BhbicpLmlubmVyVGV4dFxuICAgIGV4cGVjdChkYXRlKS50b0JlKCc0OjAwOjAwJylcblxuICAgIGF0b20uY29uZmlnLnNldCgnYXRvbS1jbG9jay5kYXRlRm9ybWF0JywgJ0REIGRkZGQgWVkgSDptbScpXG4gICAgZGF0ZSA9IHdvcmtzcGFjZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmF0b20tY2xvY2sgPiBzcGFuJykuaW5uZXJUZXh0XG4gICAgZXhwZWN0KGRhdGUudG9Mb3dlckNhc2UoKSkudG9CZSgnMTEgc2F0dXJkYXkgODcgNDowMCcpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBjaGFuZ2UgdGhlIGZvcm1hdCBvZiB0aGUgZGlzcGxheWVkIHRpbWUgaW4gdGhlIHRvb2x0aXAnLCAoKSA9PiB7XG4gICAgYXRvbS5jb25maWcuc2V0KCdhdG9tLWNsb2NrLnRvb2x0aXBEYXRlRm9ybWF0JywgJ0g6bW06c3MnKVxuICAgIGRhdGUgPSBnZXRUb29sdGlwRGF0ZSh3b3Jrc3BhY2VFbGVtZW50KVxuICAgIGV4cGVjdChkYXRlKS50b0JlKCc0OjAwOjAwJylcblxuICAgIGF0b20uY29uZmlnLnNldCgnYXRvbS1jbG9jay50b29sdGlwRGF0ZUZvcm1hdCcsICdERCBkZGRkIFlZIEg6bW0nKVxuICAgIGRhdGUgPSBnZXRUb29sdGlwRGF0ZSh3b3Jrc3BhY2VFbGVtZW50KVxuICAgIGV4cGVjdChkYXRlLnRvTG93ZXJDYXNlKCkpLnRvQmUoJzExIHNhdHVyZGF5IDg3IDQ6MDAnKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgY2hhbmdlIHRoZSBjbG9jayBjb250ZW50IGFjY29yZGluZyB3aXRoIHRoZSBsb2NhbGUnLCAoKSA9PiB7XG4gICAgYXRvbS5jb25maWcuc2V0KCdhdG9tLWNsb2NrLmRhdGVGb3JtYXQnLCAnREQgZGRkZCBZWSBIOm1tJylcbiAgICBhdG9tLmNvbmZpZy5zZXQoJ2F0b20tY2xvY2subG9jYWxlJywgJ2l0JylcbiAgICBkYXRlID0gd29ya3NwYWNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYXRvbS1jbG9jayA+IHNwYW4nKS5pbm5lclRleHRcbiAgICBleHBlY3QoZGF0ZS50b0xvd2VyQ2FzZSgpKS50b0JlKCcxMSBzYWJhdG8gODcgNDowMCcpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBjaGFuZ2UgdGhlIGNsb2NrIGNvbnRlbnQgaW4gdGhlIHRvb2x0aXAgYWNjb3JkaW5nIHdpdGggdGhlIGxvY2FsZScsICgpID0+IHtcbiAgICBhdG9tLmNvbmZpZy5zZXQoJ2F0b20tY2xvY2sudG9vbHRpcERhdGVGb3JtYXQnLCAnREQgZGRkZCBZWSBIOm1tJylcbiAgICBhdG9tLmNvbmZpZy5zZXQoJ2F0b20tY2xvY2subG9jYWxlJywgJ2l0JylcbiAgICBkYXRlID0gZ2V0VG9vbHRpcERhdGUod29ya3NwYWNlRWxlbWVudClcbiAgICBleHBlY3QoZGF0ZS50b0xvd2VyQ2FzZSgpKS50b0JlKCcxMSBzYWJhdG8gODcgNDowMCcpXG4gIH0pXG5cbn0pXG4iXX0=